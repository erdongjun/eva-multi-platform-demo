(()=>{"use strict";var ct={};(()=>{ct.d=(s,e)=>{for(var n in e)ct.o(e,n)&&!ct.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:e[n]})}})(),(()=>{ct.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e)})();var ps={};ct.d(ps,{n6:()=>X,V:()=>Y,H6:()=>G});const p=EVA,is=[{name:"ctrl",type:p.RESOURCE_TYPE.SPRITE,src:{image:{type:"png",url:"./static/assets/ctrl/ctrl.png"},json:{type:"json",url:"./static/assets/ctrl/ctrl.json"}},preload:!0},{name:"tile",type:p.RESOURCE_TYPE.SPRITE,src:{image:{type:"png",url:"./static/assets/bg/tile.png"},json:{type:"json",url:"./static/assets/bg/tile.json"}},preload:!0},{name:"player_idle_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/idle_top.png"},json:{type:"json",url:"./static/assets/player/idle_top.json"}},preload:!0},{name:"player_idle_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/idle_bottom.png"},json:{type:"json",url:"./static/assets/player/idle_bottom.json"}},preload:!0},{name:"player_idle_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/idle_left.png"},json:{type:"json",url:"./static/assets/player/idle_left.json"}},preload:!0},{name:"player_idle_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/idle_right.png"},json:{type:"json",url:"./static/assets/player/idle_right.json"}},preload:!0},{name:"player_turn_left_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_left_top.png"},json:{type:"json",url:"./static/assets/player/turn_left_top.json"}},preload:!0},{name:"player_turn_left_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_left_bottom.png"},json:{type:"json",url:"./static/assets/player/turn_left_bottom.json"}},preload:!0},{name:"player_turn_left_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_left_left.png"},json:{type:"json",url:"./static/assets/player/turn_left_left.json"}},preload:!0},{name:"player_turn_left_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_left_right.png"},json:{type:"json",url:"./static/assets/player/turn_left_right.json"}},preload:!0},{name:"player_turn_right_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_right_top.png"},json:{type:"json",url:"./static/assets/player/turn_right_top.json"}},preload:!0},{name:"player_turn_right_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_right_bottom.png"},json:{type:"json",url:"./static/assets/player/turn_right_bottom.json"}},preload:!0},{name:"player_turn_right_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_right_left.png"},json:{type:"json",url:"./static/assets/player/turn_right_left.json"}},preload:!0},{name:"player_turn_right_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/turn_right_right.png"},json:{type:"json",url:"./static/assets/player/turn_right_right.json"}},preload:!0},{name:"player_block_front_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_front_top.png"},json:{type:"json",url:"./static/assets/player/block_front_top.json"}},preload:!0},{name:"player_block_front_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_front_bottom.png"},json:{type:"json",url:"./static/assets/player/block_front_bottom.json"}},preload:!0},{name:"player_block_front_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_front_left.png"},json:{type:"json",url:"./static/assets/player/block_front_left.json"}},preload:!0},{name:"player_block_front_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_front_right.png"},json:{type:"json",url:"./static/assets/player/block_front_right.json"}},preload:!0},{name:"player_block_back_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_back_top.png"},json:{type:"json",url:"./static/assets/player/block_back_top.json"}},preload:!0},{name:"player_block_back_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_back_bottom.png"},json:{type:"json",url:"./static/assets/player/block_back_bottom.json"}},preload:!0},{name:"player_block_back_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_back_left.png"},json:{type:"json",url:"./static/assets/player/block_back_left.json"}},preload:!0},{name:"player_block_back_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_back_right.png"},json:{type:"json",url:"./static/assets/player/block_back_right.json"}},preload:!0},{name:"player_block_left_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_left_top.png"},json:{type:"json",url:"./static/assets/player/block_left_top.json"}},preload:!0},{name:"player_block_left_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_left_bottom.png"},json:{type:"json",url:"./static/assets/player/block_left_bottom.json"}},preload:!0},{name:"player_block_left_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_left_left.png"},json:{type:"json",url:"./static/assets/player/block_left_left.json"}},preload:!0},{name:"player_block_left_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_left_right.png"},json:{type:"json",url:"./static/assets/player/block_left_right.json"}},preload:!0},{name:"player_block_right_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_right_top.png"},json:{type:"json",url:"./static/assets/player/block_right_top.json"}},preload:!0},{name:"player_block_right_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_right_bottom.png"},json:{type:"json",url:"./static/assets/player/block_right_bottom.json"}},preload:!0},{name:"player_block_right_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_right_left.png"},json:{type:"json",url:"./static/assets/player/block_right_left.json"}},preload:!0},{name:"player_block_right_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_right_right.png"},json:{type:"json",url:"./static/assets/player/block_right_right.json"}},preload:!0},{name:"player_block_turn_left_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_left_top.png"},json:{type:"json",url:"./static/assets/player/block_turn_left_top.json"}},preload:!0},{name:"player_block_turn_left_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_left_bottom.png"},json:{type:"json",url:"./static/assets/player/block_turn_left_bottom.json"}},preload:!0},{name:"player_block_turn_left_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_left_left.png"},json:{type:"json",url:"./static/assets/player/block_turn_left_left.json"}},preload:!0},{name:"player_block_turn_left_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_left_right.png"},json:{type:"json",url:"./static/assets/player/block_turn_left_right.json"}},preload:!0},{name:"player_block_turn_right_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_right_top.png"},json:{type:"json",url:"./static/assets/player/block_turn_right_top.json"}},preload:!0},{name:"player_block_turn_right_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_right_bottom.png"},json:{type:"json",url:"./static/assets/player/block_turn_right_bottom.json"}},preload:!0},{name:"player_block_turn_right_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_right_left.png"},json:{type:"json",url:"./static/assets/player/block_turn_right_left.json"}},preload:!0},{name:"player_block_turn_right_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/block_turn_right_right.png"},json:{type:"json",url:"./static/assets/player/block_turn_right_right.json"}},preload:!0},{name:"player_attack_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/attack_top.png"},json:{type:"json",url:"./static/assets/player/attack_top.json"}},preload:!0},{name:"player_attack_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/attack_bottom.png"},json:{type:"json",url:"./static/assets/player/attack_bottom.json"}},preload:!0},{name:"player_attack_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/attack_left.png"},json:{type:"json",url:"./static/assets/player/attack_left.json"}},preload:!0},{name:"player_attack_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/attack_right.png"},json:{type:"json",url:"./static/assets/player/attack_right.json"}},preload:!0},{name:"player_death_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/death_top.png"},json:{type:"json",url:"./static/assets/player/death_top.json"}},preload:!0},{name:"player_death_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/death_bottom.png"},json:{type:"json",url:"./static/assets/player/death_bottom.json"}},preload:!0},{name:"player_death_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/death_left.png"},json:{type:"json",url:"./static/assets/player/death_left.json"}},preload:!0},{name:"player_death_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/death_right.png"},json:{type:"json",url:"./static/assets/player/death_right.json"}},preload:!0},{name:"player_air_death_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/air_death_top.png"},json:{type:"json",url:"./static/assets/player/air_death_top.json"}},preload:!0},{name:"player_air_death_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/air_death_bottom.png"},json:{type:"json",url:"./static/assets/player/air_death_bottom.json"}},preload:!0},{name:"player_air_death_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/air_death_left.png"},json:{type:"json",url:"./static/assets/player/air_death_left.json"}},preload:!0},{name:"player_air_death_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/player/air_death_right.png"},json:{type:"json",url:"./static/assets/player/air_death_right.json"}},preload:!0},{name:"woodenskeleton_idle_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/idle_top.png"},json:{type:"json",url:"./static/assets/woodenskeleton/idle_top.json"}},preload:!0},{name:"woodenskeleton_idle_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/idle_bottom.png"},json:{type:"json",url:"./static/assets/woodenskeleton/idle_bottom.json"}},preload:!0},{name:"woodenskeleton_idle_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/idle_left.png"},json:{type:"json",url:"./static/assets/woodenskeleton/idle_left.json"}},preload:!0},{name:"woodenskeleton_idle_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/idle_right.png"},json:{type:"json",url:"./static/assets/woodenskeleton/idle_right.json"}},preload:!0},{name:"woodenskeleton_attack_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/attack_top.png"},json:{type:"json",url:"./static/assets/woodenskeleton/attack_top.json"}},preload:!0},{name:"woodenskeleton_attack_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/attack_bottom.png"},json:{type:"json",url:"./static/assets/woodenskeleton/attack_bottom.json"}},preload:!0},{name:"woodenskeleton_attack_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/attack_left.png"},json:{type:"json",url:"./static/assets/woodenskeleton/attack_left.json"}},preload:!0},{name:"woodenskeleton_attack_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/attack_right.png"},json:{type:"json",url:"./static/assets/woodenskeleton/attack_right.json"}},preload:!0},{name:"woodenskeleton_death_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/death_top.png"},json:{type:"json",url:"./static/assets/woodenskeleton/death_top.json"}},preload:!0},{name:"woodenskeleton_death_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/death_bottom.png"},json:{type:"json",url:"./static/assets/woodenskeleton/death_bottom.json"}},preload:!0},{name:"woodenskeleton_death_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/death_left.png"},json:{type:"json",url:"./static/assets/woodenskeleton/death_left.json"}},preload:!0},{name:"woodenskeleton_death_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/woodenskeleton/death_right.png"},json:{type:"json",url:"./static/assets/woodenskeleton/death_right.json"}},preload:!0},{name:"ironskeleton_idle_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/idle_top.png"},json:{type:"json",url:"./static/assets/ironskeleton/idle_top.json"}},preload:!0},{name:"ironskeleton_idle_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/idle_bottom.png"},json:{type:"json",url:"./static/assets/ironskeleton/idle_bottom.json"}},preload:!0},{name:"ironskeleton_idle_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/idle_left.png"},json:{type:"json",url:"./static/assets/ironskeleton/idle_left.json"}},preload:!0},{name:"ironskeleton_idle_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/idle_right.png"},json:{type:"json",url:"./static/assets/ironskeleton/idle_right.json"}},preload:!0},{name:"ironskeleton_death_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/death_top.png"},json:{type:"json",url:"./static/assets/ironskeleton/death_top.json"}},preload:!0},{name:"ironskeleton_death_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/death_bottom.png"},json:{type:"json",url:"./static/assets/ironskeleton/death_bottom.json"}},preload:!0},{name:"ironskeleton_death_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/death_left.png"},json:{type:"json",url:"./static/assets/ironskeleton/death_left.json"}},preload:!0},{name:"ironskeleton_death_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/ironskeleton/death_right.png"},json:{type:"json",url:"./static/assets/ironskeleton/death_right.json"}},preload:!0},{name:"door_idle_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/door/idle_top.png"},json:{type:"json",url:"./static/assets/door/idle_top.json"}},preload:!0},{name:"door_idle_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/door/idle_left.png"},json:{type:"json",url:"./static/assets/door/idle_left.json"}},preload:!0},{name:"door_death",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/door/death.png"},json:{type:"json",url:"./static/assets/door/death.json"}},preload:!0},{name:"smoke_idle_top",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/smoke/idle_top.png"},json:{type:"json",url:"./static/assets/smoke/idle_top.json"}},preload:!0},{name:"smoke_idle_bottom",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/smoke/idle_bottom.png"},json:{type:"json",url:"./static/assets/smoke/idle_bottom.json"}},preload:!0},{name:"smoke_idle_left",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/smoke/idle_left.png"},json:{type:"json",url:"./static/assets/smoke/idle_left.json"}},preload:!0},{name:"smoke_idle_right",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/smoke/idle_right.png"},json:{type:"json",url:"./static/assets/smoke/idle_right.json"}},preload:!0},{name:"smoke_death",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/door/death.png"},json:{type:"json",url:"./static/assets/door/death.json"}},preload:!0},{name:"burst_idle",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/burst/idle.png"},json:{type:"json",url:"./static/assets/burst/idle.json"}},preload:!0},{name:"burst_attack",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/burst/attack.png"},json:{type:"json",url:"./static/assets/burst/attack.json"}},preload:!0},{name:"burst_death",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/burst/death.png"},json:{type:"json",url:"./static/assets/burst/death.json"}},preload:!0},{name:"spikes_one_zero",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/one_zero.png"},json:{type:"json",url:"./static/assets/spikes/one_zero.json"}},preload:!0},{name:"spikes_one_one",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/one_one.png"},json:{type:"json",url:"./static/assets/spikes/one_one.json"}},preload:!0},{name:"spikes_one_two",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/one_two.png"},json:{type:"json",url:"./static/assets/spikes/one_two.json"}},preload:!0},{name:"spikes_two_zero",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/two_zero.png"},json:{type:"json",url:"./static/assets/spikes/two_zero.json"}},preload:!0},{name:"spikes_two_one",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/two_one.png"},json:{type:"json",url:"./static/assets/spikes/two_one.json"}},preload:!0},{name:"spikes_two_two",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/two_two.png"},json:{type:"json",url:"./static/assets/spikes/two_two.json"}},preload:!0},{name:"spikes_two_three",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/two_three.png"},json:{type:"json",url:"./static/assets/spikes/two_three.json"}},preload:!0},{name:"spikes_three_zero",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/three_zero.png"},json:{type:"json",url:"./static/assets/spikes/three_zero.json"}},preload:!0},{name:"spikes_three_one",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/three_one.png"},json:{type:"json",url:"./static/assets/spikes/three_one.json"}},preload:!0},{name:"spikes_three_two",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/three_two.png"},json:{type:"json",url:"./static/assets/spikes/three_two.json"}},preload:!0},{name:"spikes_three_three",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/three_three.png"},json:{type:"json",url:"./static/assets/spikes/three_three.json"}},preload:!0},{name:"spikes_three_four",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/three_four.png"},json:{type:"json",url:"./static/assets/spikes/three_four.json"}},preload:!0},{name:"spikes_four_zero",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/four_zero.png"},json:{type:"json",url:"./static/assets/spikes/four_zero.json"}},preload:!0},{name:"spikes_four_one",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/four_one.png"},json:{type:"json",url:"./static/assets/spikes/four_one.json"}},preload:!0},{name:"spikes_four_two",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/four_two.png"},json:{type:"json",url:"./static/assets/spikes/four_two.json"}},preload:!0},{name:"spikes_four_three",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/four_three.png"},json:{type:"json",url:"./static/assets/spikes/four_three.json"}},preload:!0},{name:"spikes_four_four",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/four_four.png"},json:{type:"json",url:"./static/assets/spikes/four_four.json"}},preload:!0},{name:"spikes_four_five",type:p.RESOURCE_TYPE.SPRITE_ANIMATION,src:{image:{type:"png",url:"./static/assets/spikes/four_five.png"},json:{type:"json",url:"./static/assets/spikes/four_five.json"}},preload:!0}],os=EVA.plugin.renderer,ls=EVA.plugin.renderer.img,et=EVA.plugin.renderer.event,H=EVA.plugin.renderer.spriteAnimation,x=EVA.plugin.renderer.render,Xt=EVA.plugin.transition,st=EVA.plugin.renderer.graphics,pt=EVA.plugin.renderer.text,$=EVA.plugin.renderer.sprite,Ls=()=>{const s=new p.GameObject("title",{position:{x:0,y:70},origin:{x:.5,y:.5},anchor:{x:.5,y:.5}});return s.addComponent(new pt.Text({text:"Cramped Room of Death",style:{fontFamily:"Arial",fontSize:36,fontWeight:"bold",align:"center",wordWrapWidth:300,lineHeight:46,wordWrap:!0,fill:["#eeaa44"]}})),s},Os=()=>{const s=new p.GameObject("logo",{size:{width:200,height:200},origin:{x:.5,y:.5},position:{x:0,y:-100},anchor:{x:.5,y:.5}});return s.addComponent(new $.Sprite({resource:"ctrl",spriteName:"ctrl (7).png"})),s},ys=()=>{const s=new p.GameObject("creator",{position:{x:0,y:-20},origin:{x:.5,y:1},anchor:{x:.5,y:1}});return s.addComponent(new pt.Text({text:"Created By Sli97",style:{fontFamily:"Arial",fontSize:12,fontWeight:"bold",align:"center",fill:["#aaa"]}})),s},_s=()=>{const s=new p.GameObject("tips",{position:{x:0,y:130},origin:{x:.5,y:.5},anchor:{x:.5,y:.5}});return s.addComponent(new pt.Text({text:"\uFF08Tap Any Where To Start\uFF09",style:{fontFamily:"Arial",fontSize:18,fontWeight:"bold",align:"center",fill:["#ccc"]}})),s},us=s=>{let e="";for(let n=0;n<s;n++)e+=Math.floor(Math.random()*10);return e},xt=(s,e)=>Math.floor(Math.random()*(e-s)+s),U=()=>({position:{x:0,y:0},origin:{x:0,y:0},anchor:{x:0,y:0}}),dp=(s,e,n=100)=>{let O=!1;return function(){let d=arguments;O||(O=!0,s.apply(e,d),setTimeout(()=>{O=!1},n))}},mp=(s,e,n=1e3)=>{let O=null;return function(){let d=arguments;O&&clearTimeout(O),O=setTimeout(()=>{s.apply(e,d),O=null},n)}};let Mt;const Ts=()=>{let s=0;if(window.wx)Mt=Mt||wx.getSystemInfoSync(),s=Mt.safeArea.top;else return 0};var Rs=Object.defineProperty,Vt=Object.getOwnPropertySymbols,Es=Object.prototype.hasOwnProperty,hs=Object.prototype.propertyIsEnumerable,zt=(s,e,n)=>e in s?Rs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Fs=(s,e)=>{for(var n in e||(e={}))Es.call(e,n)&&zt(s,n,e[n]);if(Vt)for(var n of Vt(e))hs.call(e,n)&&zt(s,n,e[n]);return s};const Is=1313576,ds=()=>{const s=new p.GameObject("backgroundColor",Fs({},U())),e=s.addComponent(new st.Graphics);return e.graphics.beginFill(Is,1),e.graphics.drawRect(0,0,Y,X),e.graphics.endFill(),s};class Zt{static GetInstance(e){return this._instance===null&&(this._instance=new e),this._instance}}Zt._instance=null;class L extends Zt{constructor(){super();this.frame=0,this.mapInfo=[],this.tileInfo=[],this.levelIndex=2,this.reset()}static get Instance(){return super.GetInstance(L)}reset(){this.mapInfo=[],this.tileInfo=[],this.mapRowCount=0,this.mapColumnCount=0,this.player=null,this.enemies=[],this.spikes=[],this.bursts=[],this.door=null,this.smokes=[],this.records=[]}}var t=(s=>(s.WALL_ROW="WALL_ROW",s.WALL_COLUMN="WALL_COLUMN",s.WALL_LEFT_TOP="WALL_LEFT_TOP",s.WALL_RIGHT_TOP="WALL_RIGHT_TOP",s.WALL_LEFT_BOTTOM="WALL_LEFT_BOTTOM",s.WALL_RIGHT_BOOTM="WALL_RIGHT_BOOTM",s.CLIFF_LEFT="CLIFF_ROW_START",s.CLIFF_CENTER="CLIFF_ROW_CENTER",s.CLIFF_RIGHT="CLIFF_ROW_END",s.FLOOR="FLOOR",s))(t||{}),c=(s=>(s.SKELETON_WOODEN="SKELETON_WOODEN",s.SKELETON_IRON="SKELETON_IRON",s.SPIKES_ONE="SPIKES_ONE",s.SPIKES_TWO="SPIKES_TWO",s.SPIKES_THREE="SPIKES_THREE",s.SPIKES_FOUR="SPIKES_FOUR",s.BURST_FLOOR="BURST_FLOOR",s.DOOR="DOOR",s.SMOKE="SMOKE",s))(c||{}),a=(s=>(s.LEFT="LEFT",s.RIGHT="RIGHT",s.TOP="TOP",s.BOTTOM="BOTTOM",s))(a||{}),f=(s=>(s.LEFT="LEFT",s.RIGHT="RIGHT",s.TOP="TOP",s.BOTTOM="BOTTOM",s.TURNLEFT="TURNLEFT",s.TURNRIGHT="TURNRIGHT",s))(f||{}),r=(s=>(s.IDLE="IDLE",s.ATTACK="ATTACK",s.TURNLEFT="TURNLEFT",s.TURNRIGHT="TURNRIGHT",s.BLOCKFRONT="BLOCKFRONT",s.BLOCKBACK="BLOCKBACK",s.BLOCKLEFT="BLOCKLEFT",s.BLOCKRIGHT="BLOCKRIGHT",s.BLOCKTURNLEFT="BLOCKTURNLEFT",s.BLOCKTURNRIGHT="BLOCKTURNRIGHT",s.DEATH="DEATH",s.AIRDEATH="AIRDEATH",s))(r||{}),I=(s=>(s.PLAYER_CTRL="PLAYER_CTRL",s.PLAYER_MOVE_END="PLAYER_MOVE_END",s.ATTACK_ENEMY="ATTACK_ENEMY",s.ATTACK_PLAYER="ATTACK_PLAYER",s.RECORD_STEP="RECORD_STEP",s.REVOKE_STEP="REVOKE_STEP",s.SCREEN_SHAKE="SCREEN_SHAKE",s.NEXT_LEVEL="NEXT_LEVEL",s.RESTART_LEVEL="RESTART_LEVEL",s.OPENDOOR="OPENDOOR",s.GAME_START="GAME_START",s.GAME_OVER="GAME_OVER",s.BATTLE_LOADED="BATTLE_LOADED",s))(I||{}),N=(s=>(s.NUMBER="NUMBER",s.BOOLEAN="BOOLEAN",s.TRIGGER="TRIGGER",s))(N||{});const gp={GAME_START:"GAME_START",CTRL_TOP:"CTRL_TOP",CTRL_BOTTOM:"CTRL_BOTTOM",CTRL_LEFT:"CTRL_LEFT",CTRL_RIGHT:"CTRL_RIGHT",CTRL_TURN_LEFT:"CTRL_TURN_LEFT",CTRL_TURN_RIGHT:"CTRL_TURN_RIGHT",RESTART:"RESTART",REVOKE:"REVOKE",Menu:"Menu"};var Bt=(s=>(s[s.TOP=0]="TOP",s[s.BOTTOM=1]="BOTTOM",s[s.LEFT=2]="LEFT",s[s.RIGHT=3]="RIGHT",s))(Bt||{}),q=(s=>(s[s.SPIKES_ONE=2]="SPIKES_ONE",s[s.SPIKES_TWO=3]="SPIKES_TWO",s[s.SPIKES_THREE=4]="SPIKES_THREE",s[s.SPIKES_FOUR=5]="SPIKES_FOUR",s))(q||{}),h=(s=>(s.ZERO="ZERO",s.ONE="ONE",s.TWO="TWO",s.THREE="THREE",s.FOUR="FOUR",s.FIVE="FIVE",s))(h||{}),z=(s=>(s[s.ZERO=0]="ZERO",s[s.ONE=1]="ONE",s[s.TWO=2]="TWO",s[s.THREE=3]="THREE",s[s.FOUR=4]="FOUR",s[s.FIVE=5]="FIVE",s))(z||{}),i=(s=>(s.IDLE="IDLE",s.ATTACK="ATTACK",s.TURNLEFT="TURNLEFT",s.TURNRIGHT="TURNRIGHT",s.BLOCKFRONT="BLOCKFRONT",s.BLOCKBACK="BLOCKBACK",s.BLOCKLEFT="BLOCKLEFT",s.BLOCKRIGHT="BLOCKRIGHT",s.BLOCKTURNLEFT="BLOCKTURNLEFT",s.BLOCKTURNRIGHT="BLOCKTURNRIGHT",s.DEATH="DEATH",s.AIRDEATH="AIRDEATH",s.DIRECTION="DIRECTION",s.SPIKES_TYPE="SPIKES_TYPE",s.CUR_POINT_COUNT="CUR_POINT_COUNT",s))(i||{}),D=(s=>(s[s.TOP=0]="TOP",s[s.BOTTOM=1]="BOTTOM",s[s.LEFT=2]="LEFT",s[s.RIGHT=3]="RIGHT",s))(D||{});const ms=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOOTM},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:16,type:t.WALL_LEFT_TOP},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],Cs={x:2,y:8,direction:a.TOP,state:r.IDLE},gs=[{x:7,y:6,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN}],As=[],Ws=null,fs={x:7,y:8,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},Ss={mapInfo:ms,player:Cs,enemies:gs,spikes:As,bursts:Ws,door:fs},Ns=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],ks={x:2,y:0,direction:a.BOTTOM,state:r.IDLE},bs=[{x:3,y:2,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN},{x:4,y:3,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN}],Ps=[],ws=[],vs={x:5,y:3,direction:a.LEFT,state:r.IDLE,type:c.DOOR},xs={mapInfo:Ns,player:ks,enemies:bs,spikes:Ps,bursts:ws,door:vs},Ms=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:22,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],Bs={x:0,y:8,direction:a.RIGHT,state:r.IDLE},Ds=[{x:6,y:7,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN}],js=[{x:4,y:8,type:c.SPIKES_ONE,count:0},{x:4,y:9,type:c.SPIKES_ONE,count:0},{x:6,y:3,type:c.SPIKES_ONE,count:0},{x:7,y:3,type:c.SPIKES_ONE,count:0},{x:6,y:5,type:c.SPIKES_ONE,count:0},{x:7,y:5,type:c.SPIKES_ONE,count:0}],Hs=[],Us={x:6,y:0,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},Gs={mapInfo:Ms,player:Bs,enemies:Ds,spikes:js,bursts:Hs,door:Us},Ks=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],Ys={x:2,y:7,direction:a.TOP,state:r.IDLE},Xs=[{x:1,y:3,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_IRON}],Vs=[],zs=[],Zs={x:2,y:0,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},qs={mapInfo:Ks,player:Ys,enemies:Xs,spikes:Vs,bursts:zs,door:Zs},$s=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:20,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:21,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:21,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT}]],Js={x:1,y:3,direction:a.TOP,state:r.IDLE},Qs=[{x:5,y:1,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],tr=[],er=[],sr={x:6,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},rr={mapInfo:$s,player:Js,enemies:Qs,spikes:tr,bursts:er,door:sr},nr=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_COLUMN},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],ar={x:0,y:3,direction:a.RIGHT,state:r.IDLE},cr=[{x:5,y:2,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:5,y:4,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],pr=[],ir=[],or={x:8,y:3,direction:a.LEFT,state:r.IDLE,type:c.DOOR},lr={mapInfo:nr,player:ar,enemies:cr,spikes:pr,bursts:ir,door:or},Lr=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOOTM},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],Or={x:2,y:7,direction:a.TOP,state:r.IDLE},yr=[{x:2,y:2,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN}],_r=[{x:1,y:4,type:c.SPIKES_ONE,count:0},{x:2,y:4,type:c.SPIKES_TWO,count:0},{x:3,y:4,type:c.SPIKES_TWO,count:0},{x:4,y:4,type:c.SPIKES_THREE,count:0}],ur=[],Tr={x:2,y:0,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},Rr={mapInfo:Lr,player:Or,enemies:yr,spikes:_r,bursts:ur,door:Tr},Er=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:20,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:21,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:24,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],hr={x:1,y:7,direction:a.TOP,state:r.IDLE},Fr=[{x:8,y:1,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],Ir=[],dr=[{x:1,y:2,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:4,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:6,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:6,y:2,state:r.IDLE,type:c.BURST_FLOOR}],mr={x:9,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},Cr={mapInfo:Er,player:hr,enemies:Fr,spikes:Ir,bursts:dr,door:mr},gr=[[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:16,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],Ar={x:2,y:11,direction:a.TOP,state:r.IDLE},Wr=[{x:1,y:1,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN},{x:2,y:7,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN}],fr=[{x:1,y:3,type:c.SPIKES_THREE,count:0},{x:3,y:6,type:c.SPIKES_ONE,count:0},{x:2,y:9,type:c.SPIKES_TWO,count:0}],Sr=[{x:3,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:10,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:10,state:r.IDLE,type:c.BURST_FLOOR}],Nr={x:0,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},kr={mapInfo:gr,player:Ar,enemies:Wr,spikes:fr,bursts:Sr,door:Nr},br=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:25,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:20,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:24,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:21,type:t.WALL_RIGHT_TOP},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],Pr={x:1,y:7,direction:a.TOP,state:r.IDLE},wr=[{x:1,y:3,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN},{x:2,y:4,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_IRON},{x:5,y:5,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],vr=[{x:4,y:3,type:c.SPIKES_THREE,count:0}],xr=[{x:3,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:5,state:r.IDLE,type:c.BURST_FLOOR}],Mr={x:6,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},Br={mapInfo:br,player:Pr,enemies:wr,spikes:vr,bursts:xr,door:Mr},Dr=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_RIGHT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:24,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:22,type:t.WALL_RIGHT_TOP},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:24,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:22,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],jr={x:0,y:3,direction:a.RIGHT,state:r.IDLE},Hr=[{x:4,y:2,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:6,y:1,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_IRON},{x:9,y:1,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_IRON}],Ur=[{x:4,y:1,type:c.SPIKES_THREE,count:0},{x:6,y:3,type:c.SPIKES_TWO,count:0}],Gr=[{x:3,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:2,state:r.IDLE,type:c.BURST_FLOOR},{x:8,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:8,y:4,state:r.IDLE,type:c.BURST_FLOOR}],Kr={x:9,y:0,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},Yr={mapInfo:Dr,player:jr,enemies:Hr,spikes:Ur,bursts:Gr,door:Kr},Xr=[[{src:20,type:t.WALL_LEFT_TOP},{src:1,type:t.FLOOR},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:22,type:t.WALL_ROW},{src:23,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}]],Vr={x:3,y:5,direction:a.TOP,state:r.IDLE},zr=[{x:1,y:1,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_IRON},{x:6,y:2,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],Zr=[],qr=[{x:4,y:2,state:r.IDLE,type:c.BURST_FLOOR},{x:4,y:3,state:r.IDLE,type:c.BURST_FLOOR}],$r={x:0,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},Jr={mapInfo:Xr,player:Vr,enemies:zr,spikes:Zr,bursts:qr,door:$r},Qr=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:22,type:t.WALL_RIGHT_TOP},{src:14,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],tn={x:10,y:1,direction:a.LEFT,state:r.IDLE},en=[{x:1,y:4,direction:a.RIGHT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:3,y:2,direction:a.RIGHT,state:r.IDLE,type:c.SKELETON_IRON},{x:5,y:1,direction:a.RIGHT,state:r.IDLE,type:c.SKELETON_WOODEN}],sn=[],rn=[{x:1,y:1,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:2,state:r.IDLE,type:c.BURST_FLOOR}],nn={x:1,y:6,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},an={mapInfo:Qr,player:tn,enemies:en,spikes:sn,bursts:rn,door:nn},cn=[[{src:22,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_RIGHT},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_RIGHT},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_CENTER}],[{src:27,type:t.WALL_ROW},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_CENTER},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_CENTER}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:22,type:t.WALL_RIGHT_TOP},{src:14,type:t.WALL_RIGHT_BOOTM},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null}]],pn={x:1,y:0,direction:a.BOTTOM,state:r.IDLE},on=[{x:3,y:4,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN},{x:8,y:3,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],ln=[{x:3,y:2,type:c.SPIKES_TWO,count:0}],Ln=[{x:1,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:2,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:7,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:7,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:8,y:2,state:r.IDLE,type:c.BURST_FLOOR}],On={x:10,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},yn={mapInfo:cn,player:pn,enemies:on,spikes:ln,bursts:Ln,door:On},_n=[[{src:20,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:25,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_TOP},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:1,type:t.FLOOR},{src:22,type:t.WALL_ROW},{src:28,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:15,type:t.WALL_RIGHT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}]],un={x:0,y:1,direction:a.RIGHT,state:r.IDLE},Tn=[{x:2,y:4,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN},{x:4,y:6,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN}],Rn=[{x:1,y:2,type:c.SPIKES_THREE,count:0},{x:2,y:2,type:c.SPIKES_THREE,count:0},{x:2,y:6,type:c.SPIKES_TWO,count:0}],En=[],hn={x:7,y:7,direction:a.LEFT,state:r.IDLE,type:c.DOOR},Fn={mapInfo:_n,player:un,enemies:Tn,spikes:Rn,bursts:En,door:hn},In=[[{src:20,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT},{src:null,type:null}]],dn={x:0,y:1,direction:a.RIGHT,state:r.IDLE},mn=[{x:4,y:4,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:5,y:3,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:6,y:2,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:4,y:6,direction:a.TOP,state:r.IDLE,type:c.SKELETON_IRON},{x:4,y:7,direction:a.TOP,state:r.IDLE,type:c.SKELETON_IRON}],Cn=[{x:4,y:5,type:c.SPIKES_THREE,count:0},{x:5,y:5,type:c.SPIKES_TWO,count:0},{x:6,y:5,type:c.SPIKES_ONE,count:0}],gn=[{x:3,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:7,state:r.IDLE,type:c.BURST_FLOOR}],An={x:0,y:7,direction:a.LEFT,state:r.IDLE,type:c.DOOR},Wn={mapInfo:In,player:dn,enemies:mn,spikes:Cn,bursts:gn,door:An},fn=[[{src:20,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:22,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:21,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT}]],Sn={x:7,y:7,direction:a.LEFT,state:r.IDLE},Nn=[{x:2,y:1,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN},{x:2,y:4,direction:a.RIGHT,state:r.IDLE,type:c.SKELETON_WOODEN}],kn=[{x:1,y:3,type:c.SPIKES_TWO,count:0},{x:3,y:3,type:c.SPIKES_TWO,count:0},{x:4,y:1,type:c.SPIKES_TWO,count:0},{x:4,y:4,type:c.SPIKES_TWO,count:0},{x:4,y:6,type:c.SPIKES_TWO,count:0},{x:5,y:3,type:c.SPIKES_TWO,count:0},{x:6,y:2,type:c.SPIKES_TWO,count:0},{x:6,y:6,type:c.SPIKES_TWO,count:0}],bn=[{x:1,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:4,y:2,state:r.IDLE,type:c.BURST_FLOOR},{x:4,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:5,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:6,y:5,state:r.IDLE,type:c.BURST_FLOOR}],Pn={x:0,y:1,direction:a.LEFT,state:r.IDLE,type:c.DOOR},wn={mapInfo:fn,player:Sn,enemies:Nn,spikes:kn,bursts:bn,door:Pn},vn=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:21,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],xn={x:3,y:8,direction:a.LEFT,state:r.IDLE},Mn=[{x:1,y:1,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN},{x:3,y:2,direction:a.BOTTOM,state:r.IDLE,type:c.SKELETON_WOODEN}],Bn=[{x:1,y:4,type:c.SPIKES_TWO,count:0},{x:1,y:6,type:c.SPIKES_TWO,count:0},{x:1,y:8,type:c.SPIKES_FOUR,count:0}],Dn=[{x:1,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:9,state:r.IDLE,type:c.BURST_FLOOR}],jn={x:5,y:2,direction:a.LEFT,state:r.IDLE,type:c.DOOR},Hn={mapInfo:vn,player:xn,enemies:Mn,spikes:Bn,bursts:Dn,door:jn},Un=[[{src:20,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT},{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:21,type:t.WALL_ROW},{src:19,type:t.CLIFF_RIGHT}]],Gn={x:0,y:1,direction:a.RIGHT,state:r.IDLE},Kn=[{x:2,y:5,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN},{x:4,y:9,direction:a.TOP,state:r.IDLE,type:c.SKELETON_WOODEN}],Yn=[],Xn=[{x:1,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:7,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:8,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:9,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:6,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:7,state:r.IDLE,type:c.BURST_FLOOR}],Vn={x:6,y:9,direction:a.LEFT,state:r.IDLE,type:c.DOOR},zn={mapInfo:Un,player:Gn,enemies:Kn,spikes:Yn,bursts:Xn,door:Vn},Zn=[[{src:null,type:null},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:18,type:t.CLIFF_LEFT}],[{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:21,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:t.WALL_RIGHT_TOP},{src:25,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOOTM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:22,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}]],qn={x:0,y:4,direction:a.RIGHT,state:r.IDLE},$n=[{x:9,y:1,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN},{x:9,y:3,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_IRON},{x:9,y:4,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_IRON}],Jn=[],Qn=[{x:1,y:2,state:r.IDLE,type:c.BURST_FLOOR},{x:1,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:4,state:r.IDLE,type:c.BURST_FLOOR},{x:7,y:4,state:r.IDLE,type:c.BURST_FLOOR}],ta={x:9,y:0,direction:a.BOTTOM,state:r.IDLE,type:c.DOOR},ea={mapInfo:Zn,player:qn,enemies:$n,spikes:Jn,bursts:Qn,door:ta},sa=[[{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:18,type:t.CLIFF_LEFT}],[{src:null,type:null},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:16,type:t.WALL_LEFT_TOP},{src:13,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:t.FLOOR},{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT}],[{src:20,type:t.WALL_LEFT_TOP},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:19,type:t.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOOTM},{src:19,type:t.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],ra={x:0,y:7,direction:a.TOP,state:r.IDLE},na=[{x:2,y:6,direction:a.LEFT,state:r.IDLE,type:c.SKELETON_WOODEN}],aa=[],ca=[{x:2,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:2,y:5,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:3,state:r.IDLE,type:c.BURST_FLOOR},{x:3,y:4,state:r.IDLE,type:c.BURST_FLOOR}],pa={x:7,y:6,direction:a.LEFT,state:r.IDLE,type:c.DOOR},ia={level1:Ss,level2:xs,level3:Gs,level4:qs,level5:rr,level6:lr,level7:Rr,level8:Cr,level9:kr,level10:Br,level11:Yr,level12:Jr,level13:an,level14:yn,level15:Fn,level16:Wn,level17:wn,level18:Hn,level19:zn,level20:ea,level21:{mapInfo:sa,player:ra,enemies:na,spikes:aa,bursts:ca,door:pa}};class Dt extends p.Component{init(e){this.type=e,this.type===t.WALL_LEFT_TOP||this.type===t.WALL_ROW||this.type===t.WALL_RIGHT_TOP||this.type===t.WALL_LEFT_BOTTOM||this.type===t.WALL_RIGHT_BOOTM||this.type===t.WALL_COLUMN?(this.moveable=!1,this.turnable=!1):this.type===t.CLIFF_LEFT||this.type===t.CLIFF_CENTER||this.type===t.CLIFF_RIGHT?(this.moveable=!1,this.turnable=!0):this.type===t.FLOOR&&(this.moveable=!0,this.turnable=!0)}}Dt.componentName="TileManager";const J=32,Q=32,oa=(s,e,n,O)=>{const d=new p.GameObject("tile",{size:{width:J,height:Q},position:{x:n*J,y:O*Q},origin:{x:0,y:0},anchor:{x:0,y:0}});return d.addComponent(new $.Sprite({resource:"tile",spriteName:e})),d.addComponent(new Dt(s)),d};class qt extends p.Component{init(){this.initTile()}player(){}initTile(){const{mapInfo:e}=L.Instance;L.Instance.tileInfo=[];for(let n=0;n<e.length;n++){const O=e[n];L.Instance.tileInfo[n]=[];for(let d=0;d<O.length;d++){const k=O[d];if(k.src===null)continue;let v=parseInt(k.src);(v===1&&n%2==0&&d%2==1||v===5&&n%2==0&&d%2==1||v===9&&n%2==0&&d%2==1)&&(v+=xt(0,4));const Z=`bg (${v}).png`,Pt=k.type,ot=oa(Pt,Z,n,d);L.Instance.tileInfo[n][d]=ot.getComponent(Dt),this.gameObject.addChild(ot)}}}}qt.componentName="BackgroundManager";var la=Object.defineProperty,$t=Object.getOwnPropertySymbols,La=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,Jt=(s,e,n)=>e in s?la(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,ya=(s,e)=>{for(var n in e||(e={}))La.call(e,n)&&Jt(s,n,e[n]);if($t)for(var n of $t(e))Oa.call(e,n)&&Jt(s,n,e[n]);return s};const _a=()=>{const s=new p.GameObject("background",ya({},U()));return s.addComponent(new qt),s};class Qt{static GetInstance(e){return this._instance===null&&(this._instance=new e),this._instance}}Qt._instance=null;class F extends Qt{static get Instance(){return super.GetInstance(F)}constructor(){super();this.eventDic=new Map}on(e,n,O){this.eventDic.has(e)?this.eventDic.get(e).push({func:n,ctx:O}):this.eventDic.set(e,[{func:n,ctx:O}])}off(e,n){if(this.eventDic.has(e)){const O=this.eventDic.get(e).findIndex(d=>n===d.func);O>-1&&this.eventDic.get(e).splice(O,1)}}emit(e,...n){this.eventDic.has(e)&&this.eventDic.get(e).forEach(({func:O,ctx:d})=>{d?O.apply(d,n):O(...n)})}clear(){this.eventDic.clear()}}class b{constructor(e,n,O){this.go=e,this.animationName=n,this.times=O,this.spriteAnimation=this.go.getComponent(H.SpriteAnimation)}play(){this.spriteAnimation.resource=this.animationName,Promise.resolve().then(()=>{this.spriteAnimation.play(this.times)})}stop(){this.spriteAnimation.resource=null,this.spriteAnimation.stop()}}class rt{constructor(e){this.go=null,this._currentState=null,this.params=new Map,this.states=new Map,this.go=e,this.manager=this.go.getComponent(K),this.params=this.go.getComponent(V).params}get currentState(){return this._currentState}set currentState(e){e!==this._currentState&&(this._currentState=e,this._currentState instanceof b&&this._currentState.play())}stop(){this.currentState=null;for(const[e,n]of this.states)n instanceof b&&n.stop()}update(){}}class V extends p.Component{constructor(){super(...arguments);this._currentState=null,this.params=new Map,this.states=new Map}get currentState(){return this._currentState}set currentState(e){e!==this._currentState&&(this.stop(),this._currentState=e,this._currentState instanceof b&&this._currentState.play())}stop(){for(const[e,n]of this.states)n.stop()}update(){this.currentState instanceof rt&&this.currentState.update(),this.resetTrigger()}getParams(e){if(this.params.has(e))return this.params.get(e).value}setParams(e,n){this.params.has(e)&&(this.params.get(e).value=n)}resetTrigger(){for(const[e,n]of this.params)n.type===N.TRIGGER&&(n.value=!1)}}V.componentName="StateMachine";class K extends p.Component{constructor(){super(...arguments);this.id=us(12)}init(e){this.x=e.x,this.y=e.y,this.state=e.state,this.fsm=this.gameObject.getComponent(V)||null,this.direction=e.direction}update(){this.gameObject.transform.position.x=this.x*J-16*3,this.gameObject.transform.position.y=this.y*Q-16*3}get direction(){return this._direction}set direction(e){this._direction=e,this.fsm&&this.fsm.setParams(i.DIRECTION,Bt[this._direction])}get state(){return this._state}set state(e){this._state=e,this.fsm&&this.fsm.params.has(e)&&this.fsm.setParams(e,!0)}}K.componentName="EntityManager";class lt extends b{}class M extends rt{update(){switch(this.currentState){case this.states.get(a.TOP):case this.states.get(a.BOTTOM):case this.states.get(a.LEFT):case this.states.get(a.RIGHT):const{value:e}=this.params.get(i.DIRECTION);this.currentState=this.states.get(Bt[e]);default:this.currentState=this.states.get(this.manager.direction);break}}}class ua extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new lt(this.go,"player_idle_top")),this.states.set(a.BOTTOM,new lt(this.go,"player_idle_bottom")),this.states.set(a.LEFT,new lt(this.go,"player_idle_left")),this.states.set(a.RIGHT,new lt(this.go,"player_idle_right"))}}class Lt extends b{}class Ta extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Lt(this.go,"player_attack_top",1)),this.states.set(a.BOTTOM,new Lt(this.go,"player_attack_bottom",1)),this.states.set(a.LEFT,new Lt(this.go,"player_attack_left",1)),this.states.set(a.RIGHT,new Lt(this.go,"player_attack_right",1))}}class Ot extends b{}class Ra extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Ot(this.go,"player_turn_left_top",1)),this.states.set(a.BOTTOM,new Ot(this.go,"player_turn_left_bottom",1)),this.states.set(a.LEFT,new Ot(this.go,"player_turn_left_left",1)),this.states.set(a.RIGHT,new Ot(this.go,"player_turn_left_right",1))}}class yt extends b{}class Ea extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new yt(this.go,"player_turn_right_top",1)),this.states.set(a.BOTTOM,new yt(this.go,"player_turn_right_bottom",1)),this.states.set(a.LEFT,new yt(this.go,"player_turn_right_left",1)),this.states.set(a.RIGHT,new yt(this.go,"player_turn_right_right",1))}}class _t extends b{}class ha extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new _t(this.go,"player_block_front_top",1)),this.states.set(a.BOTTOM,new _t(this.go,"player_block_front_bottom",1)),this.states.set(a.LEFT,new _t(this.go,"player_block_front_left",1)),this.states.set(a.RIGHT,new _t(this.go,"player_block_front_right",1))}}class ut extends b{}class Fa extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new ut(this.go,"player_block_back_top",1)),this.states.set(a.BOTTOM,new ut(this.go,"player_block_back_bottom",1)),this.states.set(a.LEFT,new ut(this.go,"player_block_back_left",1)),this.states.set(a.RIGHT,new ut(this.go,"player_block_back_right",1))}}class Tt extends b{}class Ia extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Tt(this.go,"player_block_left_top",1)),this.states.set(a.BOTTOM,new Tt(this.go,"player_block_left_bottom",1)),this.states.set(a.LEFT,new Tt(this.go,"player_block_left_left",1)),this.states.set(a.RIGHT,new Tt(this.go,"player_block_left_right",1))}}class Rt extends b{}class da extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Rt(this.go,"player_block_right_top",1)),this.states.set(a.BOTTOM,new Rt(this.go,"player_block_right_bottom",1)),this.states.set(a.LEFT,new Rt(this.go,"player_block_right_left",1)),this.states.set(a.RIGHT,new Rt(this.go,"player_block_right_right",1))}}class Et extends b{}class ma extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Et(this.go,"player_block_turn_left_top",1)),this.states.set(a.BOTTOM,new Et(this.go,"player_block_turn_left_bottom",1)),this.states.set(a.LEFT,new Et(this.go,"player_block_turn_left_left",1)),this.states.set(a.RIGHT,new Et(this.go,"player_block_turn_left_right",1))}}class ht extends b{}class Ca extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new ht(this.go,"player_block_turn_right_top",1)),this.states.set(a.BOTTOM,new ht(this.go,"player_block_turn_right_bottom",1)),this.states.set(a.LEFT,new ht(this.go,"player_block_turn_right_left",1)),this.states.set(a.RIGHT,new ht(this.go,"player_block_turn_right_right",1))}}class Ft extends b{}class ga extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Ft(this.go,"player_death_top",1)),this.states.set(a.BOTTOM,new Ft(this.go,"player_death_bottom",1)),this.states.set(a.LEFT,new Ft(this.go,"player_death_left",1)),this.states.set(a.RIGHT,new Ft(this.go,"player_death_right",1))}}class It extends b{}class Aa extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new It(this.go,"player_air_death_top",1)),this.states.set(a.BOTTOM,new It(this.go,"player_air_death_bottom",1)),this.states.set(a.LEFT,new It(this.go,"player_air_death_left",1)),this.states.set(a.RIGHT,new It(this.go,"player_air_death_right",1))}}class tt extends K{init(e){super.init(e),F.Instance.on(I.ATTACK_ENEMY,this.onDead,this),F.Instance.on(I.PLAYER_MOVE_END,this.onChangeDirection,this)}start(){this.onChangeDirection(!1)}onDestroy(){F.Instance.off(I.ATTACK_ENEMY,this.onDead),F.Instance.off(I.PLAYER_MOVE_END,this.onChangeDirection)}onChangeDirection(e=!0){if(this.state===r.DEATH||!L.Instance.player)return;const{x:n,y:O}=L.Instance.player,d=Math.abs(n-this.x),k=Math.abs(O-this.y);d===k&&e||(n>=this.x&&O<=this.y?this.direction=d>=k?a.RIGHT:a.TOP:n<=this.x&&O<=this.y?this.direction=d>=k?a.LEFT:a.TOP:n<=this.x&&O>=this.y?this.direction=d>=k?a.LEFT:a.BOTTOM:n>=this.x&&O>=this.y&&(this.direction=d>=k?a.RIGHT:a.BOTTOM))}onDead(e){this.state!==r.DEATH&&this.id===e&&(this.state=r.DEATH)}}class Wa extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"player_idle_top",speed:1e3/8})),this.gameObject.addComponent(new x.Render({zIndex:1})),this.initParams()}start(){this.states.set(i.IDLE,new ua(this.gameObject)),this.states.set(i.ATTACK,new Ta(this.gameObject)),this.states.set(i.TURNLEFT,new Ra(this.gameObject)),this.states.set(i.TURNRIGHT,new Ea(this.gameObject)),this.states.set(i.BLOCKFRONT,new ha(this.gameObject)),this.states.set(i.BLOCKBACK,new Fa(this.gameObject)),this.states.set(i.BLOCKLEFT,new Ia(this.gameObject)),this.states.set(i.BLOCKRIGHT,new da(this.gameObject)),this.states.set(i.BLOCKTURNLEFT,new ma(this.gameObject)),this.states.set(i.BLOCKTURNRIGHT,new Ca(this.gameObject)),this.states.set(i.DEATH,new ga(this.gameObject)),this.states.set(i.AIRDEATH,new Aa(this.gameObject)),this.currentState=this.states.get(i.IDLE);const e=this.gameObject.getComponent(H.SpriteAnimation);e.on("complete",()=>{e.resource.startsWith("player_turn")?this.gameObject.getComponent(tt).state=r.IDLE:e.resource.startsWith("player_block")?this.gameObject.getComponent(tt).state=r.IDLE:e.resource.startsWith("player_attack")?this.gameObject.getComponent(tt).state=r.IDLE:e.resource.startsWith("player_death")||e.resource.startsWith("player_air_death")})}initParams(){this.params.set(i.IDLE,{type:N.TRIGGER,value:!1}),this.params.set(i.ATTACK,{type:N.TRIGGER,value:!1}),this.params.set(i.TURNLEFT,{type:N.TRIGGER,value:!1}),this.params.set(i.TURNRIGHT,{type:N.TRIGGER,value:!1}),this.params.set(i.BLOCKFRONT,{type:N.TRIGGER,value:!1}),this.params.set(i.BLOCKBACK,{type:N.TRIGGER,value:!1}),this.params.set(i.BLOCKLEFT,{type:N.TRIGGER,value:!1}),this.params.set(i.BLOCKRIGHT,{type:N.TRIGGER,value:!1}),this.params.set(i.BLOCKTURNLEFT,{type:N.TRIGGER,value:!1}),this.params.set(i.BLOCKTURNRIGHT,{type:N.TRIGGER,value:!1}),this.params.set(i.DEATH,{type:N.TRIGGER,value:!1}),this.params.set(i.AIRDEATH,{type:N.TRIGGER,value:!1}),this.params.set(i.DIRECTION,{type:N.NUMBER,value:0})}update(){switch(this.currentState){case this.states.get(i.IDLE):case this.states.get(i.ATTACK):case this.states.get(i.TURNLEFT):case this.states.get(i.TURNRIGHT):case this.states.get(i.BLOCKTURNLEFT):case this.states.get(i.BLOCKTURNRIGHT):case this.states.get(i.BLOCKFRONT):case this.states.get(i.BLOCKBACK):case this.states.get(i.BLOCKLEFT):case this.states.get(i.BLOCKRIGHT):case this.states.get(i.DEATH):case this.states.get(i.AIRDEATH):this.params.get(i.DEATH).value?this.currentState=this.states.get(i.DEATH):this.params.get(i.AIRDEATH).value?this.currentState=this.states.get(i.AIRDEATH):this.params.get(i.TURNLEFT).value?this.currentState=this.states.get(i.TURNLEFT):this.params.get(i.TURNRIGHT).value?this.currentState=this.states.get(i.TURNRIGHT):this.params.get(i.IDLE).value?this.currentState=this.states.get(i.IDLE):this.params.get(i.BLOCKFRONT).value?this.currentState=this.states.get(i.BLOCKFRONT):this.params.get(i.BLOCKBACK).value?this.currentState=this.states.get(i.BLOCKBACK):this.params.get(i.BLOCKLEFT).value?this.currentState=this.states.get(i.BLOCKLEFT):this.params.get(i.BLOCKRIGHT).value?this.currentState=this.states.get(i.BLOCKRIGHT):this.params.get(i.BLOCKTURNLEFT).value?this.currentState=this.states.get(i.BLOCKTURNLEFT):this.params.get(i.BLOCKTURNRIGHT).value?this.currentState=this.states.get(i.BLOCKTURNRIGHT):this.params.get(i.ATTACK).value&&(this.currentState=this.states.get(i.ATTACK));break;default:this.currentState=this.states.get(i.IDLE);break}super.update()}}class fa extends K{constructor(){super(...arguments);this.isMoveEndX=!0,this.isMoveEndY=!0,this.speed=1/10}init(e){this.gameObject.addComponent(new Wa),super.init(e),this.targetX=this.x,this.targetY=this.y,F.Instance.on(I.PLAYER_CTRL,this.inputProcess,this),F.Instance.on(I.ATTACK_PLAYER,this.onDead,this)}onDestroy(){F.Instance.off(I.PLAYER_CTRL,this.inputProcess),F.Instance.off(I.ATTACK_PLAYER,this.onDead)}update(){this.updateXY(),super.update()}updateXY(){this.targetX<this.x?this.x-=this.speed:this.targetX>this.x&&(this.x+=this.speed),this.targetY<this.y?this.y-=this.speed:this.targetY>this.y&&(this.y+=this.speed),Math.abs(this.targetX-this.x)<.01&&(this.x=this.targetX,this.onMoveEnd("X")),Math.abs(this.targetY-this.y)<.01&&(this.y=this.targetY,this.onMoveEnd("Y"))}onMoveEnd(e){e==="X"&&!this.isMoveEndX?(this.isMoveEndX=!0,F.Instance.emit(I.PLAYER_MOVE_END)):e==="Y"&&!this.isMoveEndY&&(this.isMoveEndY=!0,F.Instance.emit(I.PLAYER_MOVE_END))}onDead(e){this.state=e}inputProcess(e){if(!this.isMoveEndX||!this.isMoveEndY||this.state===r.DEATH||this.state===r.AIRDEATH||this.state===r.ATTACK)return;const n=this.attackEnemy(e);if(n!==-1){F.Instance.emit(I.RECORD_STEP),F.Instance.emit(I.PLAYER_MOVE_END),this.state=r.ATTACK,F.Instance.emit(I.ATTACK_ENEMY,n);return}if(this.WillBlock(e)){e===f.TOP?F.Instance.emit(I.SCREEN_SHAKE,D.TOP):e===f.BOTTOM?F.Instance.emit(I.SCREEN_SHAKE,D.BOTTOM):e===f.LEFT?F.Instance.emit(I.SCREEN_SHAKE,D.LEFT):e===f.RIGHT?F.Instance.emit(I.SCREEN_SHAKE,D.RIGHT):e===f.TURNLEFT&&this.direction===a.TOP?F.Instance.emit(I.SCREEN_SHAKE,D.LEFT):e===f.TURNLEFT&&this.direction===a.LEFT?F.Instance.emit(I.SCREEN_SHAKE,D.BOTTOM):e===f.TURNLEFT&&this.direction===a.BOTTOM?F.Instance.emit(I.SCREEN_SHAKE,D.RIGHT):e===f.TURNLEFT&&this.direction===a.RIGHT?F.Instance.emit(I.SCREEN_SHAKE,D.TOP):e===f.TURNRIGHT&&this.direction===a.TOP?F.Instance.emit(I.SCREEN_SHAKE,D.RIGHT):e===f.TURNRIGHT&&this.direction===a.LEFT?F.Instance.emit(I.SCREEN_SHAKE,D.TOP):e===f.TURNRIGHT&&this.direction===a.BOTTOM?F.Instance.emit(I.SCREEN_SHAKE,D.LEFT):e===f.TURNRIGHT&&this.direction===a.RIGHT&&F.Instance.emit(I.SCREEN_SHAKE,D.BOTTOM);return}this.move(e)}move(e){F.Instance.emit(I.RECORD_STEP),e===f.TOP?(this.targetY-=1,this.state=r.IDLE,this.isMoveEndY=!1,this.showSmoke(a.TOP)):e===f.BOTTOM?(this.targetY+=1,this.state=r.IDLE,this.isMoveEndY=!1,this.showSmoke(a.BOTTOM)):e===f.LEFT?(this.targetX-=1,this.state=r.IDLE,this.isMoveEndX=!1,this.showSmoke(a.LEFT)):e===f.RIGHT?(this.targetX+=1,this.state=r.IDLE,this.isMoveEndX=!1,this.showSmoke(a.RIGHT)):e===f.TURNLEFT?(this.state=r.TURNLEFT,this.direction===a.TOP?this.direction=a.LEFT:this.direction===a.LEFT?this.direction=a.BOTTOM:this.direction===a.BOTTOM?this.direction=a.RIGHT:this.direction===a.RIGHT&&(this.direction=a.TOP),this.state=r.TURNLEFT,F.Instance.emit(I.PLAYER_MOVE_END)):e===f.TURNRIGHT&&(this.state=r.TURNRIGHT,this.direction===a.TOP?this.direction=a.RIGHT:this.direction===a.LEFT?this.direction=a.TOP:this.direction===a.BOTTOM?this.direction=a.LEFT:this.direction===a.RIGHT&&(this.direction=a.BOTTOM),this.state=r.TURNRIGHT,F.Instance.emit(I.PLAYER_MOVE_END))}showSmoke(e){this.gameObject.parent.getComponent(Ht).generateSmoke(this.x,this.y,e)}attackEnemy(e){const n=L.Instance.enemies.filter(O=>O.state!==r.DEATH);for(let O=0;O<n.length;O++){const d=n[O],{x:k,y:v,id:Z}=d;if(this.direction===a.TOP&&e===f.TOP&&v===this.targetY-2&&k===this.x)return Z;if(this.direction===a.BOTTOM&&e===f.BOTTOM&&v===this.targetY+2&&k===this.x)return Z;if(this.direction===a.LEFT&&e===f.LEFT&&k===this.targetX-2&&v===this.y)return Z;if(this.direction===a.RIGHT&&e===f.RIGHT&&k===this.targetX+2&&v===this.y)return Z}return-1}WillBlock(e){var n,O,d,k,v,Z,Pt,ot,ge,Ae,We,fe,Se,Ne,ke,be,Pe,we,ve,xe,Me,Be,De,je,He,Ue,Ge,Ke,Ye,Xe,Ve,ze,Ze,qe,$e,Je,Qe,ts,es,ss,rs,ns,as,cs;const{targetX:u,targetY:T,direction:P}=this,{tileInfo:m}=L.Instance,W=L.Instance.enemies.filter(o=>o.state!==r.DEATH),{x:g,y:A,state:B}=L.Instance.door,j=L.Instance.bursts.filter(o=>o.state!==r.DEATH),{mapRowCount:wt,mapColumnCount:vt}=L.Instance;if(e===f.TOP){const o=T-1;if(P===a.TOP){if(o<0)return this.state=r.BLOCKFRONT,!0;const y=T-2,E=(n=m[u])==null?void 0:n[o],R=(O=m[u])==null?void 0:O[y];if((g===u&&A===o||g===u&&A===y)&&B!==r.DEATH)return this.state=r.BLOCKFRONT,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===u&&C===y||S===u&&C===o)return this.state=r.BLOCKFRONT,!0}if(j.some(l=>l.x===u&&l.y===o)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKFRONT,!0}else if(P===a.BOTTOM){if(o<0)return this.state=r.BLOCKBACK,!0;const y=T,E=(d=m[u])==null?void 0:d[o],R=(k=m[u])==null?void 0:k[y];if((g===u&&A===o||g===u&&A===y)&&B!==r.DEATH)return this.state=r.BLOCKBACK,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===u&&C===o)return this.state=r.BLOCKBACK,!0}if(j.some(l=>l.x===u&&l.y===o)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKBACK,!0}else if(P===a.LEFT){if(o<0)return this.state=r.BLOCKRIGHT,!0;const y=u-1,E=T-1,R=(v=m[u])==null?void 0:v[o],l=(Z=m[y])==null?void 0:Z[E];if((g===u&&A===o||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKRIGHT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===u&&w===o||C===y&&w===E)return this.state=r.BLOCKRIGHT,!0}if(j.some(_=>_.x===u&&_.y===o)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKRIGHT,!0}else if(P===a.RIGHT){if(o<0)return this.state=r.BLOCKLEFT,!0;const y=u+1,E=T-1,R=(Pt=m[u])==null?void 0:Pt[o],l=(ot=m[y])==null?void 0:ot[E];if((g===u&&A===o||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKLEFT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===u&&w===o||C===y&&w===E)return this.state=r.BLOCKLEFT,!0}if(j.some(_=>_.x===u&&_.y===o)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKLEFT,!0}}else if(e===f.BOTTOM){const o=T+1;if(P===a.TOP){if(o>vt-1)return this.state=r.BLOCKBACK,!0;const y=T,E=(ge=m[u])==null?void 0:ge[o],R=(Ae=m[u])==null?void 0:Ae[y];if((g===u&&A===o||g===u&&A===y)&&B!==r.DEATH)return this.state=r.BLOCKBACK,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===u&&C===o)return this.state=r.BLOCKBACK,!0}if(j.some(l=>l.x===u&&l.y===o)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKBACK,!0}else if(P===a.BOTTOM){if(o>vt-1)return this.state=r.BLOCKFRONT,!0;const y=T+2,E=(We=m[u])==null?void 0:We[o],R=(fe=m[u])==null?void 0:fe[y];if((g===u&&A===o||g===u&&A===y)&&B!==r.DEATH)return this.state=r.BLOCKFRONT,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===u&&C===y||S===u&&C===o)return this.state=r.BLOCKFRONT,!0}if(j.some(l=>l.x===u&&l.y===o)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKFRONT,!0}else if(P===a.LEFT){if(o>vt-1)return this.state=r.BLOCKLEFT,!0;const y=u-1,E=T+1,R=(Se=m[u])==null?void 0:Se[o],l=(Ne=m[y])==null?void 0:Ne[E];if((g===u&&A===o||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKLEFT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===u&&w===o||C===y&&w===E)return this.state=r.BLOCKLEFT,!0}if(j.some(_=>_.x===u&&_.y===o)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKLEFT,!0}else if(P===a.RIGHT){if(o>vt-1)return this.state=r.BLOCKRIGHT,!0;const y=u+1,E=T+1,R=(ke=m[u])==null?void 0:ke[o],l=(be=m[y])==null?void 0:be[E];if((g===u&&A===o||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKRIGHT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===u&&w===o||C===y&&w===E)return this.state=r.BLOCKRIGHT,!0}if(j.some(_=>_.x===u&&_.y===o)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKRIGHT,!0}}else if(e===f.LEFT){const o=u-1;if(P===a.TOP){if(o<0)return this.state=r.BLOCKLEFT,!0;const y=u-1,E=T-1,R=(Pe=m[o])==null?void 0:Pe[T],l=(we=m[y])==null?void 0:we[E];if((g===o&&A===T||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKLEFT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===o&&w===T||C===y&&w===E)return this.state=r.BLOCKLEFT,!0}if(j.some(_=>_.x===o&&_.y===T)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKLEFT,!0}else if(P===a.BOTTOM){if(o<0)return this.state=r.BLOCKRIGHT,!0;const y=u-1,E=T+1,R=(ve=m[o])==null?void 0:ve[T],l=(xe=m[y])==null?void 0:xe[E];if((g===o&&A===T||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKRIGHT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===o&&w===T||C===y&&w===E)return this.state=r.BLOCKRIGHT,!0}if(j.some(_=>_.x===o&&_.y===T)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKRIGHT,!0}else if(P===a.LEFT){if(o<0)return this.state=r.BLOCKFRONT,!0;const y=u-2,E=(Me=m[o])==null?void 0:Me[T],R=(Be=m[y])==null?void 0:Be[T];if((g===o&&A===T||g===y&&A===T)&&B!==r.DEATH)return this.state=r.BLOCKFRONT,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===o&&C===T||S===y&&C===T)return this.state=r.BLOCKFRONT,!0}if(j.some(l=>l.x===o&&l.y===T)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKFRONT,!0}else if(P===a.RIGHT){if(o<0)return this.state=r.BLOCKBACK,!0;const y=u,E=(De=m[o])==null?void 0:De[T],R=(je=m[y])==null?void 0:je[T];if((g===o&&A===T||g===y&&A===T)&&B!==r.DEATH)return this.state=r.BLOCKBACK,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===o&&C===T)return this.state=r.BLOCKBACK,!0}if(j.some(l=>l.x===o&&l.y===T)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKBACK,!0}}else if(e===f.RIGHT){const o=u+1;if(P===a.TOP){if(o>wt-1)return this.state=r.BLOCKRIGHT,!0;const y=u+1,E=T-1,R=(He=m[o])==null?void 0:He[T],l=(Ue=m[y])==null?void 0:Ue[E];if((g===o&&A===T||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKRIGHT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===o&&w===T||C===y&&w===E)return this.state=r.BLOCKRIGHT,!0}if(j.some(_=>_.x===o&&_.y===T)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKRIGHT,!0}else if(P===a.BOTTOM){if(o>wt-1)return this.state=r.BLOCKLEFT,!0;const y=u+1,E=T+1,R=(Ge=m[o])==null?void 0:Ge[T],l=(Ke=m[y])==null?void 0:Ke[E];if((g===o&&A===T||g===y&&A===E)&&B!==r.DEATH)return this.state=r.BLOCKLEFT,!0;for(let _=0;_<W.length;_++){const S=W[_],{x:C,y:w}=S;if(C===o&&w===T||C===y&&w===E)return this.state=r.BLOCKLEFT,!0}if(j.some(_=>_.x===o&&_.y===T)&&(!l||l.turnable))return!1;if(!(R&&R.moveable&&(!l||l.turnable)))return this.state=r.BLOCKLEFT,!0}else if(P===a.LEFT){if(o>wt-1)return this.state=r.BLOCKBACK,!0;const y=u,E=(Ye=m[o])==null?void 0:Ye[T],R=(Xe=m[y])==null?void 0:Xe[T];if((g===o&&A===T||g===y&&A===T)&&B!==r.DEATH)return this.state=r.BLOCKBACK,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===o&&C===T)return this.state=r.BLOCKBACK,!0}if(j.some(l=>l.x===o&&l.y===T)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKBACK,!0}else if(P===a.RIGHT){if(o>wt-1)return this.state=r.BLOCKFRONT,!0;const y=u+2,E=(Ve=m[o])==null?void 0:Ve[T],R=(ze=m[y])==null?void 0:ze[T];if((g===o&&A===T||g===y&&A===T)&&B!==r.DEATH)return this.state=r.BLOCKFRONT,!0;for(let l=0;l<W.length;l++){const _=W[l],{x:S,y:C}=_;if(S===o&&C===T||S===y&&C===T)return this.state=r.BLOCKFRONT,!0}if(j.some(l=>l.x===o&&l.y===T)&&(!R||R.turnable))return!1;if(!(E&&E.moveable&&(!R||R.turnable)))return this.state=r.BLOCKFRONT,!0}}else if(e===f.TURNLEFT){let o,y;if(P===a.TOP?(o=T-1,y=u-1):P===a.BOTTOM?(o=T+1,y=u+1):P===a.LEFT?(o=T+1,y=u-1):P===a.RIGHT&&(o=T-1,y=u+1),(g===u&&A===o||g===y&&A===T||g===y&&A===o)&&B!==r.DEATH)return this.state=r.BLOCKTURNLEFT,!0;for(let E=0;E<W.length;E++){const R=W[E],{x:l,y:_}=R;if(l===y&&_===T)return this.state=r.BLOCKTURNLEFT,!0;if(l===y&&_===o)return this.state=r.BLOCKTURNLEFT,!0;if(l===u&&_===o)return this.state=r.BLOCKTURNLEFT,!0}if(!((!((Ze=m[u])==null?void 0:Ze[o])||((qe=m[u])==null?void 0:qe[o].turnable))&&(!(($e=m[y])==null?void 0:$e[T])||((Je=m[y])==null?void 0:Je[T].turnable))&&(!((Qe=m[y])==null?void 0:Qe[o])||((ts=m[y])==null?void 0:ts[o].turnable))))return this.state=r.BLOCKTURNLEFT,!0}else if(e===f.TURNRIGHT){let o,y;if(P===a.TOP?(y=T-1,o=u+1):P===a.BOTTOM?(y=T+1,o=u-1):P===a.LEFT?(y=T-1,o=u-1):P===a.RIGHT&&(y=T+1,o=u+1),(g===u&&A===y||g===o&&A===T||g===o&&A===y)&&B!==r.DEATH)return this.state=r.BLOCKTURNRIGHT,!0;for(let E=0;E<W.length;E++){const R=W[E],{x:l,y:_}=R;if(l===o&&_===T)return this.state=r.BLOCKTURNRIGHT,!0;if(l===o&&_===y)return this.state=r.BLOCKTURNRIGHT,!0;if(l===u&&_===y)return this.state=r.BLOCKTURNRIGHT,!0}if(!((!((es=m[u])==null?void 0:es[y])||((ss=m[u])==null?void 0:ss[y].turnable))&&(!((rs=m[o])==null?void 0:rs[T])||((ns=m[o])==null?void 0:ns[T].turnable))&&(!((as=m[o])==null?void 0:as[y])||((cs=m[o])==null?void 0:cs[y].turnable))))return this.state=r.BLOCKTURNRIGHT,!0}return!1}}var Sa=Object.defineProperty,te=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,ka=Object.prototype.propertyIsEnumerable,ee=(s,e,n)=>e in s?Sa(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,ba=(s,e)=>{for(var n in e||(e={}))Na.call(e,n)&&ee(s,n,e[n]);if(te)for(var n of te(e))ka.call(e,n)&&ee(s,n,e[n]);return s};const Pa=128,wa=128,va=s=>{const e=new p.GameObject("player",ba({size:{width:Pa,height:wa}},U()));return e.addComponent(new fa(s)),e};class dt extends b{}class xa extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new dt(this.go,"door_idle_top")),this.states.set(a.BOTTOM,new dt(this.go,"door_idle_top")),this.states.set(a.LEFT,new dt(this.go,"door_idle_left")),this.states.set(a.RIGHT,new dt(this.go,"door_idle_left"))}}class mt extends b{}class Ma extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new mt(this.go,"door_death",1)),this.states.set(a.BOTTOM,new mt(this.go,"door_death",1)),this.states.set(a.LEFT,new mt(this.go,"door_death",1)),this.states.set(a.RIGHT,new mt(this.go,"door_death",1))}}class Ba extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"door_idle_top",speed:1e3})),this.gameObject.addComponent(new x.Render),this.initParams()}start(){this.states.set(i.IDLE,new xa(this.gameObject)),this.states.set(i.DEATH,new Ma(this.gameObject)),this.currentState=this.states.get(i.IDLE)}initParams(){this.params.set(i.IDLE,{type:N.TRIGGER,value:!1}),this.params.set(i.DEATH,{type:N.TRIGGER,value:!1}),this.params.set(i.DIRECTION,{type:N.NUMBER,value:0})}update(){switch(this.currentState){case this.states.get(r.IDLE):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(r.DEATH));break;case this.states.get(r.DEATH):this.params.get(i.IDLE).value&&(this.currentState=this.states.get(i.IDLE));break;default:this.currentState=this.states.get(r.IDLE);break}super.update()}}class Da extends K{init(e){this.gameObject.addComponent(new Ba),super.init(e)}onDestroy(){}lateUpdate(){L.Instance.enemies&&L.Instance.enemies.every(e=>e.state===r.DEATH)&&this.state!==r.DEATH&&(this.state=r.DEATH)}}var ja=Object.defineProperty,se=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Ua=Object.prototype.propertyIsEnumerable,re=(s,e,n)=>e in s?ja(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Ga=(s,e)=>{for(var n in e||(e={}))Ha.call(e,n)&&re(s,n,e[n]);if(se)for(var n of se(e))Ua.call(e,n)&&re(s,n,e[n]);return s};const Ka=128,Ya=128,Xa=s=>{const e=new p.GameObject("door",Ga({size:{width:Ka,height:Ya}},U()));return e.addComponent(new Da(s)),e};class Ct extends b{}class Va extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Ct(this.go,"woodenskeleton_idle_top")),this.states.set(a.BOTTOM,new Ct(this.go,"woodenskeleton_idle_bottom")),this.states.set(a.LEFT,new Ct(this.go,"woodenskeleton_idle_left")),this.states.set(a.RIGHT,new Ct(this.go,"woodenskeleton_idle_right"))}}class gt extends b{}class za extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new gt(this.go,"woodenskeleton_attack_top",1)),this.states.set(a.BOTTOM,new gt(this.go,"woodenskeleton_attack_bottom",1)),this.states.set(a.LEFT,new gt(this.go,"woodenskeleton_attack_left",1)),this.states.set(a.RIGHT,new gt(this.go,"woodenskeleton_attack_right",1))}}class At extends b{}class Za extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new At(this.go,"woodenskeleton_death_top",1)),this.states.set(a.BOTTOM,new At(this.go,"woodenskeleton_death_bottom",1)),this.states.set(a.LEFT,new At(this.go,"woodenskeleton_death_left",1)),this.states.set(a.RIGHT,new At(this.go,"woodenskeleton_death_right",1))}}class qa extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"woodenskeleton_idle_top",speed:1e3/8})),this.initParams()}start(){this.states.set(i.IDLE,new Va(this.gameObject)),this.states.set(i.ATTACK,new za(this.gameObject)),this.states.set(i.DEATH,new Za(this.gameObject)),this.currentState=this.states.get(i.IDLE);const e=this.gameObject.getComponent(H.SpriteAnimation);e.on("complete",()=>{e.resource.startsWith("woodenskeleton_attack")?this.gameObject.getComponent(tt).state=r.IDLE:e.resource.startsWith("woodenskeleton_death")})}initParams(){this.params.set(i.IDLE,{type:N.TRIGGER,value:!1}),this.params.set(i.ATTACK,{type:N.TRIGGER,value:!1}),this.params.set(i.DEATH,{type:N.TRIGGER,value:!1}),this.params.set(i.DIRECTION,{type:N.NUMBER,value:0})}update(){switch(this.currentState){case this.states.get(r.IDLE):this.params.get(i.ATTACK).value?this.currentState=this.states.get(r.ATTACK):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(r.DEATH));break;case this.states.get(r.ATTACK):this.params.get(i.IDLE).value?this.currentState=this.states.get(r.IDLE):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(r.DEATH));break;case this.states.get(r.DEATH):this.params.get(i.ATTACK).value?this.currentState=this.states.get(r.ATTACK):this.params.get(i.IDLE).value&&(this.currentState=this.states.get(r.IDLE));break;default:this.currentState=this.states.get(r.IDLE);break}super.update()}}class $a extends tt{init(e){this.gameObject.addComponent(new qa),this.gameObject.addComponent(new x.Render(new x.Render({zIndex:1}))),super.init(e),this.type=c.SKELETON_WOODEN,F.Instance.on(I.PLAYER_MOVE_END,this.onAttack,this)}onAttack(){if(this.state===r.DEATH)return;const{targetX:e,targetY:n,state:O}=L.Instance.player;(e===this.x&&Math.abs(n-this.y)<=1||n===this.y&&Math.abs(e-this.x)<=1)&&O===r.IDLE&&(this.state=r.ATTACK,F.Instance.emit(I.ATTACK_PLAYER,r.DEATH))}onDestroy(){super.onDestroy(),F.Instance.off(I.PLAYER_MOVE_END,this.onAttack)}}var Ja=Object.defineProperty,ne=Object.getOwnPropertySymbols,Qa=Object.prototype.hasOwnProperty,tc=Object.prototype.propertyIsEnumerable,ae=(s,e,n)=>e in s?Ja(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,ec=(s,e)=>{for(var n in e||(e={}))Qa.call(e,n)&&ae(s,n,e[n]);if(ne)for(var n of ne(e))tc.call(e,n)&&ae(s,n,e[n]);return s};const sc=128,rc=128,nc=s=>{const e=new p.GameObject("woodenSkeleton",ec({size:{width:sc,height:rc}},U()));return e.addComponent(new $a(s)),e};class Wt extends b{}class ac extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Wt(this.go,"ironskeleton_idle_top")),this.states.set(a.BOTTOM,new Wt(this.go,"ironskeleton_idle_bottom")),this.states.set(a.LEFT,new Wt(this.go,"ironskeleton_idle_left")),this.states.set(a.RIGHT,new Wt(this.go,"ironskeleton_idle_right"))}}class ft extends b{}class cc extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new ft(this.go,"ironskeleton_death_top",1)),this.states.set(a.BOTTOM,new ft(this.go,"ironskeleton_death_bottom",1)),this.states.set(a.LEFT,new ft(this.go,"ironskeleton_death_left",1)),this.states.set(a.RIGHT,new ft(this.go,"ironskeleton_death_right",1))}}class pc extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"ironskeleton_idle_top",speed:1e3/8})),this.initParams()}start(){this.states.set(i.IDLE,new ac(this.gameObject)),this.states.set(i.DEATH,new cc(this.gameObject)),this.currentState=this.states.get(i.IDLE);const e=this.gameObject.getComponent(H.SpriteAnimation);e.on("complete",()=>{e.resource.startsWith("ironskeleton_death")})}initParams(){this.params.set(i.IDLE,{type:N.TRIGGER,value:!1}),this.params.set(i.DEATH,{type:N.TRIGGER,value:!1}),this.params.set(i.DIRECTION,{type:N.NUMBER,value:0})}update(){switch(this.currentState){case this.states.get(r.IDLE):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(r.DEATH));break;case this.states.get(r.DEATH):this.params.get(i.IDLE).value&&(this.currentState=this.states.get(r.IDLE));break;default:this.currentState=this.states.get(r.IDLE);break}super.update()}}class ic extends tt{init(e){this.gameObject.addComponent(new pc),this.gameObject.addComponent(new x.Render(new x.Render({zIndex:1}))),super.init(e),this.type=c.SKELETON_IRON}}var oc=Object.defineProperty,ce=Object.getOwnPropertySymbols,lc=Object.prototype.hasOwnProperty,Lc=Object.prototype.propertyIsEnumerable,pe=(s,e,n)=>e in s?oc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Oc=(s,e)=>{for(var n in e||(e={}))lc.call(e,n)&&pe(s,n,e[n]);if(ce)for(var n of ce(e))Lc.call(e,n)&&pe(s,n,e[n]);return s};const yc=128,_c=128,uc=s=>{const e=new p.GameObject("ironSkeleton",Oc({size:{width:yc,height:_c}},U()));return e.addComponent(new ic(s)),e};class St extends b{}class Tc extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new St(this.go,"smoke_idle_top",1)),this.states.set(a.BOTTOM,new St(this.go,"smoke_idle_bottom",1)),this.states.set(a.LEFT,new St(this.go,"smoke_idle_left",1)),this.states.set(a.RIGHT,new St(this.go,"smoke_idle_right",1))}}class Nt extends b{}class Rc extends M{constructor(e){super(e);this.init()}init(){this.states.set(a.TOP,new Nt(this.go,"smoke_death",1)),this.states.set(a.BOTTOM,new Nt(this.go,"smoke_death",1)),this.states.set(a.LEFT,new Nt(this.go,"smoke_death",1)),this.states.set(a.RIGHT,new Nt(this.go,"smoke_death",1))}}class Ec extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"smoke_idle_top",speed:1e3/12})),this.gameObject.addComponent(new x.Render),this.initParams()}start(){this.states.set(i.IDLE,new Tc(this.gameObject)),this.states.set(i.DEATH,new Rc(this.gameObject)),this.currentState=this.states.get(r.IDLE);const e=this.gameObject.getComponent(H.SpriteAnimation);e.on("complete",()=>{e.resource.startsWith("smoke_idle")&&(this.gameObject.getComponent(tt).state=r.DEATH)})}initParams(){this.params.set(i.IDLE,{type:N.TRIGGER,value:!1}),this.params.set(i.DEATH,{type:N.TRIGGER,value:!1}),this.params.set(i.DIRECTION,{type:N.NUMBER,value:0})}update(){switch(this.currentState){case this.states.get(r.IDLE):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(i.DEATH));break;case this.states.get(r.DEATH):this.params.get(i.IDLE).value&&(this.currentState=this.states.get(i.IDLE));break;default:this.currentState=this.states.get(r.IDLE);break}super.update()}}class ie extends K{init(e){this.gameObject.addComponent(new Ec),super.init(e)}}var hc=Object.defineProperty,oe=Object.getOwnPropertySymbols,Fc=Object.prototype.hasOwnProperty,Ic=Object.prototype.propertyIsEnumerable,le=(s,e,n)=>e in s?hc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,dc=(s,e)=>{for(var n in e||(e={}))Fc.call(e,n)&&le(s,n,e[n]);if(oe)for(var n of oe(e))Ic.call(e,n)&&le(s,n,e[n]);return s};const mc=128,Cc=128,gc=s=>{const e=new p.GameObject("smoke",dc({size:{width:mc,height:Cc}},U()));return e.addComponent(new ie(s)),e};class Ac extends b{}class Wc extends b{}class fc extends b{}class Sc extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"burst_idle",speed:1e3/8})),this.gameObject.addComponent(new x.Render(new x.Render({zIndex:0}))),this.initParams()}start(){this.states.set(r.IDLE,new Ac(this.gameObject,"burst_idle",1)),this.states.set(r.ATTACK,new Wc(this.gameObject,"burst_attack",1)),this.states.set(r.DEATH,new fc(this.gameObject,"burst_death",1)),this.currentState=this.states.get(r.IDLE);const e=this.gameObject.getComponent(H.SpriteAnimation);e.on("complete",()=>{e.resource.startsWith("burst_death")})}initParams(){this.params.set(i.IDLE,{type:N.TRIGGER,value:!1}),this.params.set(i.ATTACK,{type:N.TRIGGER,value:!1}),this.params.set(i.DEATH,{type:N.TRIGGER,value:!1})}update(){switch(this.currentState){case this.states.get(r.IDLE):this.params.get(i.ATTACK).value?this.currentState=this.states.get(r.ATTACK):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(r.DEATH));break;case this.states.get(r.ATTACK):this.params.get(i.IDLE).value?this.currentState=this.states.get(r.IDLE):this.params.get(i.DEATH).value&&(this.currentState=this.states.get(r.DEATH));break;case this.states.get(r.DEATH):this.params.get(i.ATTACK).value?this.currentState=this.states.get(r.ATTACK):this.params.get(i.IDLE).value&&(this.currentState=this.states.get(r.IDLE));break;default:this.currentState=this.states.get(r.IDLE);break}super.update()}}class Nc extends K{init(e){this.gameObject.addComponent(new Sc),super.init(e),F.Instance.on(I.PLAYER_MOVE_END,this.onBurst,this)}onDestroy(){F.Instance.off(I.PLAYER_MOVE_END,this.onBurst)}update(){this.gameObject.transform.position.x=this.x*J,this.gameObject.transform.position.y=this.y*Q}onBurst(){if(this.state===r.DEATH)return;const{targetX:e,targetY:n}=L.Instance.player;this.x===e&&this.y===n&&this.state===r.IDLE?this.state=r.ATTACK:this.state===r.ATTACK&&(this.state=r.DEATH,this.x===e&&this.y===n&&F.Instance.emit(I.ATTACK_PLAYER,r.AIRDEATH))}}var kc=Object.defineProperty,Le=Object.getOwnPropertySymbols,bc=Object.prototype.hasOwnProperty,Pc=Object.prototype.propertyIsEnumerable,Oe=(s,e,n)=>e in s?kc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,wc=(s,e)=>{for(var n in e||(e={}))bc.call(e,n)&&Oe(s,n,e[n]);if(Le)for(var n of Le(e))Pc.call(e,n)&&Oe(s,n,e[n]);return s};const vc=s=>{const e=new p.GameObject("burst",wc({size:{width:J,height:Q}},U()));return e.addComponent(new Nc(s)),e};class jt extends b{}class xc extends rt{constructor(e){super(e);this.init()}init(){this.states.set(h.ZERO,new jt(this.go,"spikes_one_zero",1)),this.states.set(h.ONE,new jt(this.go,"spikes_one_one",1)),this.states.set(h.TWO,new jt(this.go,"spikes_one_two",1))}update(){switch(this.currentState){case this.states.get(h.ZERO):this.switch(h.ZERO);break;case this.states.get(h.ONE):this.switch(h.ONE);break;case this.states.get(h.TWO):this.switch(h.TWO);break;default:this.currentState=this.states.get(h.ZERO);break}}switch(e){const n=this.params.get(i.CUR_POINT_COUNT).value;z[e]!==n&&(this.currentState=this.states.get(z[n]))}}class kt extends b{}class Mc extends rt{constructor(e){super(e);this.init()}init(){this.states.set(h.ZERO,new kt(this.go,"spikes_two_zero",1)),this.states.set(h.ONE,new kt(this.go,"spikes_two_one",1)),this.states.set(h.TWO,new kt(this.go,"spikes_two_two",1)),this.states.set(h.THREE,new kt(this.go,"spikes_two_three",1))}update(){switch(this.currentState){case this.states.get(h.ZERO):this.switch(h.ZERO);break;case this.states.get(h.ONE):this.switch(h.ONE);break;case this.states.get(h.TWO):this.switch(h.TWO);break;case this.states.get(h.THREE):this.switch(h.THREE);break;default:this.currentState=this.states.get(h.ZERO);break}}switch(e){const n=this.params.get(i.CUR_POINT_COUNT).value;z[e]!==n&&(this.currentState=this.states.get(z[n]))}}class it extends b{}class Bc extends rt{constructor(e){super(e);this.init()}init(){this.states.set(h.ZERO,new it(this.go,"spikes_three_zero",1)),this.states.set(h.ONE,new it(this.go,"spikes_three_one",1)),this.states.set(h.TWO,new it(this.go,"spikes_three_two",1)),this.states.set(h.THREE,new it(this.go,"spikes_three_three",1)),this.states.set(h.FOUR,new it(this.go,"spikes_three_four",1))}update(){switch(this.currentState){case this.states.get(h.ZERO):this.switch(h.ZERO);break;case this.states.get(h.ONE):this.switch(h.ONE);break;case this.states.get(h.TWO):this.switch(h.TWO);break;case this.states.get(h.THREE):this.switch(h.THREE);break;case this.states.get(h.FOUR):this.switch(h.FOUR);break;default:this.currentState=this.states.get(h.ZERO);break}}switch(e){const n=this.params.get(i.CUR_POINT_COUNT).value;z[e]!==n&&(this.currentState=this.states.get(z[n]))}}class nt extends b{}class Dc extends rt{constructor(e){super(e);this.init()}init(){this.states.set(h.ZERO,new nt(this.go,"spikes_four_zero",1)),this.states.set(h.ONE,new nt(this.go,"spikes_four_one",1)),this.states.set(h.TWO,new nt(this.go,"spikes_four_two",1)),this.states.set(h.THREE,new nt(this.go,"spikes_four_three",1)),this.states.set(h.FOUR,new nt(this.go,"spikes_four_four",1)),this.states.set(h.FIVE,new nt(this.go,"spikes_four_five",1))}update(){switch(this.currentState){case this.states.get(h.ZERO):this.switch(h.ZERO);break;case this.states.get(h.ONE):this.switch(h.ONE);break;case this.states.get(h.TWO):this.switch(h.TWO);break;case this.states.get(h.THREE):this.switch(h.THREE);break;case this.states.get(h.FOUR):this.switch(h.FOUR);break;case this.states.get(h.FIVE):this.switch(h.FIVE);break;default:this.currentState=this.states.get(h.ZERO);break}}switch(e){const n=this.params.get(i.CUR_POINT_COUNT).value;z[e]!==n&&(this.currentState=this.states.get(z[n]))}}class jc extends V{init(){this.gameObject.addComponent(new H.SpriteAnimation({autoPlay:!0,forwards:!0,resource:"spikes_one_zero",speed:1e3/8})),this.gameObject.addComponent(new x.Render(new x.Render({zIndex:0}))),this.initParams()}start(){this.states.set(c.SPIKES_ONE,new xc(this.gameObject)),this.states.set(c.SPIKES_TWO,new Mc(this.gameObject)),this.states.set(c.SPIKES_THREE,new Bc(this.gameObject)),this.states.set(c.SPIKES_FOUR,new Dc(this.gameObject));const e=this.params.get(i.SPIKES_TYPE).value;this.currentState=this.states.get(q[e]);const n=this.gameObject.getComponent(H.SpriteAnimation),O=this.gameObject.getComponent(bt);n.on("complete",()=>{(e===q.SPIKES_ONE&&n.resource.startsWith("spikes_one_two")||e===q.SPIKES_TWO&&n.resource.startsWith("spikes_two_three")||e===q.SPIKES_THREE&&n.resource.startsWith("spikes_three_four")||e===q.SPIKES_FOUR&&n.resource.startsWith("spikes_four_five"))&&O.backZero()})}initParams(){this.params.set(i.SPIKES_TYPE,{type:N.NUMBER,value:0}),this.params.set(i.CUR_POINT_COUNT,{type:N.NUMBER,value:1})}update(){super.update()}}class bt extends p.Component{constructor(){super(...arguments);this._curPointCount=0}get curPointCount(){return this._curPointCount}set curPointCount(e){this._curPointCount=e,this.fsm&&this.fsm.setParams(i.CUR_POINT_COUNT,e)}init(e){this.fsm=this.gameObject.addComponent(new jc),this.x=e.x,this.y=e.y;const n=e.type;this.fsm.setParams(i.SPIKES_TYPE,q[n]),this.curPointCount=e.count,this.totalPointCount=q[n],F.Instance.on(I.PLAYER_MOVE_END,this.onLoop,this)}update(){this.gameObject.transform.position.x=this.x*J-16*3,this.gameObject.transform.position.y=this.y*Q-16*3}onDestroy(){F.Instance.off(I.PLAYER_MOVE_END,this.onLoop)}onLoop(){this.curPointCount==this.totalPointCount?this.curPointCount=1:this.curPointCount++,this.onAttack()}backZero(){this.curPointCount=0}onAttack(){const{x:e,y:n}=L.Instance.player;e===this.x&&n===this.y&&this.curPointCount===this.totalPointCount&&F.Instance.emit(I.ATTACK_PLAYER,r.DEATH)}}bt.componentName="SpikesManager";var Hc=Object.defineProperty,ye=Object.getOwnPropertySymbols,Uc=Object.prototype.hasOwnProperty,Gc=Object.prototype.propertyIsEnumerable,_e=(s,e,n)=>e in s?Hc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Kc=(s,e)=>{for(var n in e||(e={}))Uc.call(e,n)&&_e(s,n,e[n]);if(ye)for(var n of ye(e))Gc.call(e,n)&&_e(s,n,e[n]);return s};const Yc=128,Xc=128,Vc=s=>{const e=new p.GameObject("spikes",Kc({size:{width:Yc,height:Xc}},U()));return e.addComponent(new bt(s)),e};class Ht extends p.Component{constructor(){super(...arguments);this.childrens=[]}init(){F.Instance.on(I.PLAYER_MOVE_END,this.checkFinishCurLevel,this),F.Instance.on(I.NEXT_LEVEL,this.nextLevel,this),F.Instance.on(I.RESTART_LEVEL,this.initLevel,this),F.Instance.on(I.SCREEN_SHAKE,this.onShake,this),F.Instance.on(I.REVOKE_STEP,this.revoke,this),F.Instance.on(I.RECORD_STEP,this.record,this),this.initLevel()}onDestroy(){F.Instance.off(I.PLAYER_MOVE_END,this.checkFinishCurLevel,this),F.Instance.off(I.NEXT_LEVEL,this.nextLevel,this),F.Instance.off(I.RESTART_LEVEL,this.initLevel,this),F.Instance.off(I.SCREEN_SHAKE,this.onShake,this),F.Instance.off(I.REVOKE_STEP,this.revoke,this),F.Instance.off(I.RECORD_STEP,this.record,this)}initLevel(){const e=ia["level"+L.Instance.levelIndex];e?L.Instance.fm.fadeIn(200).then(()=>{this.clearLevel(),console.log("level"+L.Instance.levelIndex),this.isShaking=!1,L.Instance.reset(),this.level=e,L.Instance.mapInfo=this.level.mapInfo.concat(),L.Instance.mapRowCount=this.level.mapInfo.length||0,L.Instance.mapColumnCount=this.level.mapInfo[0].length||0,this.generateBackground(),this.generateDoor(),this.generateBursts(),this.generateSpikes(),this.generateEnemy(),this.generatePlayer(),F.Instance.emit(I.BATTLE_LOADED),this.fixPos(),L.Instance.fm.fadeOut(200)}):L.Instance.fm.fadeIn(200).then(()=>{G.scene.destroy(),G.loadScene({scene:Kt()})})}clearLevel(){this.childrens.forEach(e=>{e.destroy()}),this.childrens=[]}generateBackground(){const e=_a();this.gameObject.addChild(e),this.childrens.push(e)}generatePlayer(){if(!this.level.player){L.Instance.player=null;return}const e=va(this.level.player);this.gameObject.addChild(e),this.childrens.push(e),L.Instance.player=e.getComponent(K)}generateEnemy(){if(!this.level.enemies){L.Instance.enemies=[];return}const e=this.level.enemies.map(n=>{let O=null;return n.type===c.SKELETON_WOODEN?O=nc(n):n.type===c.SKELETON_IRON&&(O=uc(n)),this.gameObject.addChild(O),this.childrens.push(O),O.getComponent(K)});L.Instance.enemies=e}generateBursts(){if(!this.level.bursts){L.Instance.bursts=[];return}const e=this.level.bursts.map(n=>{let O=null;return n.type===c.BURST_FLOOR&&(O=vc(n)),this.gameObject.addChild(O),this.childrens.push(O),O.getComponent(K)});L.Instance.bursts=e}generateSpikes(){if(!this.level.spikes){L.Instance.spikes=[];return}const e=this.level.spikes.map(n=>{const O=Vc(n);return this.gameObject.addChild(O),this.childrens.push(O),O.getComponent(bt)});L.Instance.spikes=e}generateDoor(){if(!this.level.door){L.Instance.door=null;return}const e=Xa(this.level.door);this.gameObject.addChild(e),this.childrens.push(e),L.Instance.door=e.getComponent(K)}generateSmoke(e,n,O){const d=L.Instance.smokes.find(k=>k.state===r.DEATH);if(d)d.x=e,d.y=n,d.state=r.IDLE,d.direction=O;else{const k=gc({x:e,y:n,direction:O,state:r.IDLE});this.gameObject.addChild(k),this.childrens.push(k),L.Instance.smokes.push(k.getComponent(ie))}}checkFinishCurLevel(){const{x:e,y:n,state:O}=L.Instance.door,{x:d,y:k}=L.Instance.player;e===d&&n===k&&O===r.DEATH&&F.Instance.emit(I.NEXT_LEVEL)}nextLevel(){L.Instance.levelIndex+=1,this.initLevel()}fixPos(){const{mapRowCount:e,mapColumnCount:n}=L.Instance,O=(Y-J*e)/2,d=(X-Q*n)/2-50;this.gameObject.transform.position.x=O,this.gameObject.transform.position.y=d}onShake(e){this.isShaking||(this.isShaking=!0,this.shakeType=e,this.oldFrame=L.Instance.frame,this.oldOffset=this.gameObject.transform.position)}onShakeUpdate(e=.8,n=300,O=6){if(this.isShaking){const d=(L.Instance.frame-this.oldFrame)/60*1e3,k=(L.Instance.frame-this.oldFrame)/60*2*Math.PI*O,v=e*Math.sin(k);this.shakeType===D.TOP?this.gameObject.transform.position.y=this.oldOffset.y-v:this.shakeType===D.BOTTOM?this.gameObject.transform.position.y=this.oldOffset.y+v:this.shakeType===D.LEFT?this.gameObject.transform.position.x=this.oldOffset.x-v:this.shakeType===D.RIGHT&&(this.gameObject.transform.position.x=this.oldOffset.x+v),d>n&&(this.gameObject.transform.position.x=this.oldOffset.x,this.gameObject.transform.position.y=this.oldOffset.y,this.isShaking=!1)}}update(){this.onShakeUpdate()}revoke(){const e=L.Instance.records.pop();if(e){L.Instance.player.x=L.Instance.player.targetX=e.player.x,L.Instance.player.y=L.Instance.player.targetY=e.player.y,L.Instance.player.state=e.player.state,L.Instance.player.direction=e.player.direction;for(let n=0;n<e.enemies.length;n++){const O=e.enemies[n];L.Instance.enemies[n].x=O.x,L.Instance.enemies[n].y=O.y,L.Instance.enemies[n].state=O.state,L.Instance.enemies[n].direction=O.direction}for(let n=0;n<e.spikes.length;n++){const O=e.spikes[n];L.Instance.spikes[n].x=O.x,L.Instance.spikes[n].y=O.y,L.Instance.spikes[n].curPointCount=O.curPointCount,L.Instance.spikes[n].direction=O.direction}for(let n=0;n<e.bursts.length;n++){const O=e.bursts[n];L.Instance.bursts[n].x=O.x,L.Instance.bursts[n].y=O.y,L.Instance.bursts[n].state=O.state}L.Instance.door.x=e.door.x,L.Instance.door.y=e.door.y,L.Instance.door.state=e.door.state,L.Instance.door.direction=e.door.direction}}record(){const e={player:{x:L.Instance.player.targetX,y:L.Instance.player.targetY,state:L.Instance.player.state===r.IDLE||L.Instance.player.state===r.DEATH||L.Instance.player.state===r.AIRDEATH?L.Instance.player.state:r.IDLE,direction:L.Instance.player.direction},door:{x:L.Instance.door.x,y:L.Instance.door.y,state:L.Instance.door.state,direction:L.Instance.door.direction},enemies:L.Instance.enemies.map(n=>({x:n.x,y:n.y,state:n.state,direction:n.direction})),spikes:L.Instance.spikes.map(n=>({x:n.x,y:n.y,curPointCount:n.curPointCount})),bursts:L.Instance.bursts.map(n=>({x:n.x,y:n.y,state:n.state}))};L.Instance.records.push(e)}}Ht.componentName="BattleManager";const ue=70,Te=60,zc=3,Zc=140,qc=s=>{const e=Math.floor((s-1)/2),n=(s-1)%2;return{x:(e-1)*ue,y:-Zc+n*(Te+zc)}},at=(s,e)=>{const n=new p.GameObject("button",{size:{width:ue,height:Te},position:qc(e),origin:{x:.5,y:.5},anchor:{x:.5,y:1}});n.addComponent(new $.Sprite({resource:"ctrl",spriteName:`ctrl (${e}).png`}));const O=n.addComponent(new Xt.Transition);O.group={big:[{name:"scale.x",component:n.transform,values:[{time:0,value:.9,tween:"ease-out"},{time:100,value:1,tween:"ease-in"}]},{name:"scale.y",component:n.transform,values:[{time:0,value:.9,tween:"ease-out"},{time:100,value:1,tween:"ease-in"}]}],small:[{name:"scale.x",component:n.transform,values:[{time:0,value:1,tween:"ease-out"},{time:100,value:.9,tween:"ease-in"}]},{name:"scale.y",component:n.transform,values:[{time:0,value:1,tween:"ease-out"},{time:100,value:.9,tween:"ease-in"}]}]};const d=n.addComponent(new et.Event);d.on("touchstart",()=>{O.play("small",1)});const k=()=>{O.play("big",1),F.Instance.emit(I.PLAYER_CTRL,s)};return d.on("touchend",k),d.on("touchendoutside",k),n},$c=()=>{const s=new p.GameObject("controller",{position:{x:0,y:0},origin:{x:.5,y:1},anchor:{x:.5,y:1}});return s.addChild(at(f.TURNLEFT,1)),s.addChild(at(f.LEFT,2)),s.addChild(at(f.TOP,3)),s.addChild(at(f.BOTTOM,4)),s.addChild(at(f.TURNRIGHT,5)),s.addChild(at(f.RIGHT,6)),s.addComponent(new x.Render),s},Jc=()=>{const s=new p.GameObject("footer",{position:{x:0,y:-16},origin:{x:.5,y:1},anchor:{x:.5,y:1}});return s.addComponent(new pt.Text({text:"Cramped Room of Death Demo",style:{fontFamily:"Arial",fontSize:12,fontWeight:"bold",align:"center",fill:["#ccc"]}})),s.addComponent(new x.Render),s};class Re extends p.Component{constructor(){super(...arguments);this.oldFrame=0,this.duration=100,this.isFadingIn=!1,this.isFadingOut=!1}start(){this.render=this.gameObject.getComponent(x.Render)}update(){if(this.isFadingIn){const e=(L.Instance.frame-this.oldFrame)/(60*this.duration/1e3);e<1?this.render.alpha=e:(this.render.alpha=1,this.isFadingIn=!1,this.fadeInPromiseResolve(null))}else if(this.isFadingOut){const e=(L.Instance.frame-this.oldFrame)/(60*this.duration/1e3);e<1?this.render.alpha=1-e:(this.isFadingOut=!1,this.render.alpha=0,this.fadeOutPromiseResolve())}}fadeIn(e=100){return this.duration=e,this.isFadingIn=!0,this.isFadingOut=!1,this.oldFrame=L.Instance.frame,this.fadeInPromise=new Promise(n=>{this.fadeInPromiseResolve=n}),this.fadeInPromise}fadeOut(e=100){return this.duration=e,this.isFadingOut=!0,this.isFadingIn=!1,this.oldFrame=L.Instance.frame,this.fadeOutPromise=new Promise(n=>{this.fadeOutPromiseResolve=n}),this.fadeOutPromise}}Re.componentName="FaderManager";var Qc=Object.defineProperty,Ee=Object.getOwnPropertySymbols,tp=Object.prototype.hasOwnProperty,ep=Object.prototype.propertyIsEnumerable,he=(s,e,n)=>e in s?Qc(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,sp=(s,e)=>{for(var n in e||(e={}))tp.call(e,n)&&he(s,n,e[n]);if(Ee)for(var n of Ee(e))ep.call(e,n)&&he(s,n,e[n]);return s};const Fe=()=>{const s=new p.GameObject("fader",sp({},U())),e=s.addComponent(new st.Graphics);s.addComponent(new x.Render({zIndex:5,alpha:0})),e.graphics.beginFill(0,1),e.graphics.drawRect(0,0,Y,X),e.graphics.endFill();const n=new Re;return s.addComponent(n),L.Instance.fm=n,s},rp=()=>{const s=new p.GameObject("restartButton",{size:{width:Ut,height:Gt},position:{x:0,y:20},origin:{x:.5,y:.5},anchor:{x:.5,y:.5}});s.addComponent(new $.Sprite({resource:"ctrl",spriteName:"ctrl (8).png"}));const e=s.addComponent(new et.Event);e.on("touchstart",()=>{});const n=()=>{F.Instance.emit(I.RESTART_LEVEL)};return e.on("touchend",n),e.on("touchendoutside",n),s},np=()=>{const s=new p.GameObject("restartButton",{size:{width:Ut,height:Gt},position:{x:-90,y:20},origin:{x:.5,y:.5},anchor:{x:.5,y:.5}});s.addComponent(new $.Sprite({resource:"ctrl",spriteName:"ctrl (9).png"}));const e=s.addComponent(new et.Event);e.on("touchstart",()=>{});const n=()=>{F.Instance.emit(I.REVOKE_STEP)};return e.on("touchend",n),e.on("touchendoutside",n),s},ap=()=>{const s=new p.GameObject("restartButton",{size:{width:Ut,height:Gt},position:{x:90,y:20},origin:{x:.5,y:.5},anchor:{x:.5,y:.5}});s.addComponent(new $.Sprite({resource:"ctrl",spriteName:"ctrl (10).png"}));const e=s.addComponent(new et.Event);e.on("touchstart",()=>{});const n=()=>{G.scene.destroy(),G.loadScene({scene:Kt()})};return e.on("touchend",n),e.on("touchendoutside",n),s},Ut=50,Gt=64,cp=()=>{const s=new p.GameObject("menu",{position:{x:0,y:30+Ts()},origin:{x:.5,y:.5},anchor:{x:.5,y:0}});return s.addChild(np()),s.addChild(rp()),s.addChild(ap()),s.addComponent(new x.Render),s};var pp=Object.defineProperty,Ie=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,de=(s,e,n)=>e in s?pp(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,lp=(s,e)=>{for(var n in e||(e={}))ip.call(e,n)&&de(s,n,e[n]);if(Ie)for(var n of Ie(e))op.call(e,n)&&de(s,n,e[n]);return s};const Lp=s=>{const e=new p.GameObject("backgroundColor",lp({},U())),n=e.addComponent(new st.Graphics);e.addComponent(new x.Render({zIndex:8})),n.graphics.beginFill(0,1),n.graphics.drawRect(0,0,Y,X),n.graphics.endFill(),s.addChild(e);const O=()=>{F.Instance.off(I.BATTLE_LOADED,O),s.removeChild(e)};return F.Instance.on(I.BATTLE_LOADED,O,void 0),e};var Op=Object.defineProperty,me=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,_p=Object.prototype.propertyIsEnumerable,Ce=(s,e,n)=>e in s?Op(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,up=(s,e)=>{for(var n in e||(e={}))yp.call(e,n)&&Ce(s,n,e[n]);if(me)for(var n of me(e))_p.call(e,n)&&Ce(s,n,e[n]);return s};const Tp=()=>{const s=new p.Scene("battle");s.transform.size.width=Y,s.transform.size.height=X,s.addComponent(new x.Render({sortableChildren:!0})),s.addChild(Fe()),s.addChild(ds());const e=new p.GameObject("container",up({},U()));return e.addComponent(new Ht),e.addComponent(new x.Render({sortableChildren:!0})),s.addChild(e),s.addChild($c()),s.addChild(cp()),s.addChild(Jc()),s.addChild(Lp(s)),s},Kt=()=>{const s=new p.Scene("menu");return s.transform.size.width=Y,s.transform.size.height=X,s.addComponent(new x.Render({sortableChildren:!0})),s.addChild(Fe()),L.Instance.levelIndex=1,L.Instance.fm.fadeOut(1e3),s.addChild(Os()),s.addChild(Ls()),s.addChild(_s()),s.addChild(ys()),s.addComponent(new et.Event).on("touchstart",()=>{L.Instance.fm.fadeIn(300).then(()=>{G.scene.destroy(),G.loadScene({scene:Tp()})})}),s},Rp=()=>{const s=new p.Scene("menu");s.transform.size.width=Y,s.transform.size.height=X;const e=new p.GameObject("outer"),n=new p.GameObject("inner"),O=e.addComponent(new st.Graphics),d=n.addComponent(new st.Graphics);return O.graphics.beginFill(16777215,1),O.graphics.drawRect(60,X/2-50,Y-120,50),O.graphics.endFill(),s.addChild(e),s.addChild(n),p.resource.on(p.LOAD_EVENT.PROGRESS,k=>{const v=k.resourceLoadedCount/k.resourceTotal;d.graphics.beginFill(16697903,1),d.graphics.drawRect(60,X/2-50,(Y-120)*v,50),d.graphics.endFill()}),p.resource.on(p.LOAD_EVENT.COMPLETE,()=>{G.scene.destroy(),G.loadScene({scene:Kt()})}),p.resource.preload(),s},Y=375,X=667;p.resource.addResource(is);let Yt;window.wx?Yt=window.canvas:Yt=document.querySelector("#canvas");const G=new p.Game({systems:[new os.RendererSystem({canvas:Yt,resolution:window.devicePixelRatio/2,width:Y,height:X,antialias:!0}),new ls.ImgSystem,new Xt.TransitionSystem,new H.SpriteAnimationSystem,new x.RenderSystem,new $.SpriteSystem,new et.EventSystem,new st.GraphicsSystem,new pt.TextSystem]});G.ticker.add(()=>{L.Instance.frame++}),G.loadScene({scene:Rp()}),window.game=G})();
